// ChromaSDK minified
function ChromaSDK(){}function onTimer(){if(null!=this.uri&&initialized){var e=new XMLHttpRequest;e.open("PUT",uri+"/heartbeat",!0),e.setRequestHeader("content-type","application/json"),e.onerror=function(){console.log("request onerror",e.status)},e.onreadystatechange=function(){4==e.readyState&&200!=e.status&&console.log("request onreadystatechange",e.status)},e.send(null)}}ChromaSDK.prototype={uri:void 0,init:function(){setTimeout(function(){null!=this.timerId&&(clearInterval(this.timerId),this.timerId=void 0);var e=new XMLHttpRequest;e.open("POST","https://chromasdk.io:54236/razer/chromasdk",!0),e.setRequestHeader("content-type","application/json");var a=JSON.stringify({title:"RUST Chroma RGB Mod",description:"Play RGB lighting from the live channel.",author:{name:"Razer, Inc.",contact:"https://www.microsoft.com/store/apps/9N5LS3RX247G"},device_supported:["keyboard","mouse","headset","mousepad","keypad","chromalink"],category:"application"});e.send(a),e.onreadystatechange=function(){4==e.readyState&&null!=e.responseText&&""!=e.responseText&&(uri=JSON.parse(e.responseText).uri,timerId=setInterval(onTimer,1e3),initialized=!0)}},0)},uninit:function(){setTimeout(function(){if(initialized=!1,null!=this.uri){var e=new XMLHttpRequest;e.open("DELETE",uri,!0),e.setRequestHeader("content-type","application/json"),e.send(null),e.onreadystatechange=function(){e.readyState},uri=void 0}},0)},createKeyboardEffect:function(e,a){setTimeout(function(){if(null!=this.uri){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}else if("CHROMA_CUSTOM_KEY"==e){r={color:a,key:a};o=JSON.stringify({effect:e,param:r})}var i=new XMLHttpRequest;i.open("PUT",uri+"/keyboard",!0),i.setRequestHeader("content-type","application/json"),i.send(o)}},0)},preCreateKeyboardEffect:function(e,a){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}else"CHROMA_CUSTOM_KEY"==e&&(o=JSON.stringify({effect:e,param:a}));var i=new XMLHttpRequest;return i.open("POST",uri+"/keyboard",!1),i.setRequestHeader("content-type","application/json"),i.send(o),JSON.parse(i.responseText).id},createMousematEffect:function(e,a){setTimeout(function(){if(null!=this.uri){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}var i=new XMLHttpRequest;i.open("PUT",uri+"/mousepad",!0),i.setRequestHeader("content-type","application/json"),i.send(o)}},0)},preCreateMousematEffect:function(e,a){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}var i=new XMLHttpRequest;return i.open("POST",uri+"/mousepad",!1),i.setRequestHeader("content-type","application/json"),i.send(o),JSON.parse(i.responseText).id},createMouseEffect:function(e,a){setTimeout(function(){if(null!=this.uri){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM2"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}var i=new XMLHttpRequest;i.open("PUT",uri+"/mouse",!0),i.setRequestHeader("content-type","application/json"),i.send(o)}},0)},preCreateMouseEffect:function(e,a){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM2"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}var i=new XMLHttpRequest;return i.open("POST",uri+"/mouse",!1),i.setRequestHeader("content-type","application/json"),i.send(o),JSON.parse(i.responseText).id},createHeadsetEffect:function(e,a){setTimeout(function(){if(null!=this.uri){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}var i=new XMLHttpRequest;i.open("PUT",uri+"/headset",!0),i.setRequestHeader("content-type","application/json"),i.send(o)}},0)},preCreateHeadsetEffect:function(e,a){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}var i=new XMLHttpRequest;return i.open("POST",uri+"/headset",!1),i.setRequestHeader("content-type","application/json"),i.send(o),JSON.parse(i.responseText).id},createKeypadEffect:function(e,a){setTimeout(function(){if(null!=this.uri){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}var i=new XMLHttpRequest;i.open("PUT",uri+"/keypad",!0),i.setRequestHeader("content-type","application/json"),i.send(o)}},0)},preCreateKeypadEffect:function(e,a){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}var i=new XMLHttpRequest;return i.open("POST",uri+"/keypad",!1),i.setRequestHeader("content-type","application/json"),i.send(o),JSON.parse(i.responseText).id},createChromaLinkEffect:function(e,a){setTimeout(function(){if(null!=this.uri){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}var i=new XMLHttpRequest;i.open("PUT",uri+"/chromalink",!0),i.setRequestHeader("content-type","application/json"),i.send(o)}},0)},preCreateChromaLinkEffect:function(e,a){var o;if("CHROMA_NONE"==e)o=JSON.stringify({effect:e});else if("CHROMA_CUSTOM"==e)o=JSON.stringify({effect:e,param:a});else if("CHROMA_STATIC"==e){var r={color:a};o=JSON.stringify({effect:e,param:r})}var i=new XMLHttpRequest;return i.open("POST",uri+"/chromalink",!1),i.setRequestHeader("content-type","application/json"),i.send(o),JSON.parse(i.responseText).id},setEffect:function(e){setTimeout(function(){if(null!=this.uri){var a=JSON.stringify({id:e}),o=new XMLHttpRequest;o.open("PUT",uri+"/effect",!0),o.setRequestHeader("content-type","application/json"),o.send(a)}},0)},deleteEffect:function(e){setTimeout(function(){if(null!=this.uri){var a=JSON.stringify({id:e}),o=new XMLHttpRequest;o.open("DELETE",uri+"/effect",!0),o.setRequestHeader("content-type","application/json"),o.send(a)}},0)},deleteEffectGroup:function(e){setTimeout(function(){if(null!=this.uri){var a=e,o=new XMLHttpRequest;o.open("DELETE",uri+"/effect",!0),o.setRequestHeader("content-type","application/json"),o.send(a)}},0)}};var RZKEY={RZKEY_ESC:1,RZKEY_F1:3,RZKEY_F2:4,RZKEY_F3:5,RZKEY_F4:6,RZKEY_F5:7,RZKEY_F6:8,RZKEY_F7:9,RZKEY_F8:10,RZKEY_F9:11,RZKEY_F10:12,RZKEY_F11:13,RZKEY_F12:14,RZKEY_1:258,RZKEY_2:259,RZKEY_3:260,RZKEY_4:261,RZKEY_5:262,RZKEY_6:263,RZKEY_7:264,RZKEY_8:265,RZKEY_9:266,RZKEY_0:267,RZKEY_A:770,RZKEY_B:1031,RZKEY_C:1029,RZKEY_D:772,RZKEY_E:516,RZKEY_F:773,RZKEY_G:774,RZKEY_H:775,RZKEY_I:521,RZKEY_J:776,RZKEY_K:777,RZKEY_L:778,RZKEY_M:1033,RZKEY_N:1032,RZKEY_O:522,RZKEY_P:523,RZKEY_Q:514,RZKEY_R:517,RZKEY_S:771,RZKEY_T:518,RZKEY_U:520,RZKEY_V:1030,RZKEY_W:515,RZKEY_X:1028,RZKEY_Y:519,RZKEY_Z:1027,RZKEY_NUMLOCK:274,RZKEY_NUMPAD0:1299,RZKEY_NUMPAD1:1042,RZKEY_NUMPAD2:1043,RZKEY_NUMPAD3:1044,RZKEY_NUMPAD4:786,RZKEY_NUMPAD5:787,RZKEY_NUMPAD6:788,RZKEY_NUMPAD7:530,RZKEY_NUMPAD8:531,RZKEY_NUMPAD9:532,RZKEY_NUMPAD_DIVIDE:275,RZKEY_NUMPAD_MULTIPLY:276,RZKEY_NUMPAD_SUBTRACT:277,RZKEY_NUMPAD_ADD:533,RZKEY_NUMPAD_ENTER:1045,RZKEY_NUMPAD_DECIMAL:1300,RZKEY_PRINTSCREEN:15,RZKEY_SCROLL:16,RZKEY_PAUSE:17,RZKEY_INSERT:271,RZKEY_HOME:272,RZKEY_PAGEUP:273,RZKEY_DELETE:527,RZKEY_END:528,RZKEY_PAGEDOWN:529,RZKEY_UP:1040,RZKEY_LEFT:1295,RZKEY_DOWN:1296,RZKEY_RIGHT:1297,RZKEY_TAB:513,RZKEY_CAPSLOCK:769,RZKEY_BACKSPACE:270,RZKEY_ENTER:782,RZKEY_LCTRL:1281,RZKEY_LWIN:1282,RZKEY_LALT:1283,RZKEY_SPACE:1287,RZKEY_RALT:1291,RZKEY_FN:1292,RZKEY_RMENU:1293,RZKEY_RCTRL:1294,RZKEY_LSHIFT:1025,RZKEY_RSHIFT:1038,RZKEY_MACRO1:256,RZKEY_MACRO2:512,RZKEY_MACRO3:768,RZKEY_MACRO4:1024,RZKEY_MACRO5:1280,RZKEY_OEM_1:257,RZKEY_OEM_2:268,RZKEY_OEM_3:269,RZKEY_OEM_4:524,RZKEY_OEM_5:525,RZKEY_OEM_6:526,RZKEY_OEM_7:779,RZKEY_OEM_8:780,RZKEY_OEM_9:1034,RZKEY_OEM_10:1035,RZKEY_OEM_11:1036,RZKEY_EUR_1:781,RZKEY_EUR_2:1026,RZKEY_JPN_1:21,RZKEY_JPN_2:1037,RZKEY_JPN_3:1284,RZKEY_JPN_4:1289,RZKEY_JPN_5:1290,RZKEY_KOR_1:21,RZKEY_KOR_2:781,RZKEY_KOR_3:1026,RZKEY_KOR_4:1037,RZKEY_KOR_5:1284,RZKEY_KOR_6:1289,RZKEY_KOR_7:1290,RZKEY_INVALID:65535},RZLED={RZLED_LOGO:20},Mouse={};function getHighByte(e){return(65280&e)>>8}function getLowByte(e){return 255&e}Mouse.RZLED2={RZLED2_SCROLLWHEEL:515,RZLED2_LOGO:1795,RZLED2_BACKLIGHT:1027,RZLED2_LEFT_SIDE1:256,RZLED2_LEFT_SIDE2:512,RZLED2_LEFT_SIDE3:768,RZLED2_LEFT_SIDE4:1024,RZLED2_LEFT_SIDE5:1280,RZLED2_LEFT_SIDE6:1536,RZLED2_LEFT_SIDE7:1792,RZLED2_BOTTOM1:2049,RZLED2_BOTTOM2:2050,RZLED2_BOTTOM3:2051,RZLED2_BOTTOM4:2052,RZLED2_BOTTOM5:2053,RZLED2_RIGHT_SIDE1:262,RZLED2_RIGHT_SIDE2:518,RZLED2_RIGHT_SIDE3:774,RZLED2_RIGHT_SIDE4:1030,RZLED2_RIGHT_SIDE5:1286,RZLED2_RIGHT_SIDE6:1542,RZLED2_RIGHT_SIDE7:1798};var EChromaSDKDeviceTypeEnum={DE_1D:0,DE_2D:1},EChromaSDKDevice1DEnum={DE_ChromaLink:0,DE_Headset:1,DE_Mousepad:2,DE_MAX:3},EChromaSDKDevice2DEnum={DE_Keyboard:0,DE_Keypad:1,DE_Mouse:2,DE_MAX:3},EChromaSDKDeviceEnum={DE_ChromaLink:0,DE_Headset:1,DE_Keyboard:2,DE_Keypad:3,DE_Mouse:4,DE_Mousepad:5,DE_MAX:6};function ChromaAnimationFrame1D(){}function ChromaAnimationFrame2D(){}var ChromaAnimation={LoadedAnimations:{},LoadedAnimations1D:{},LoadedAnimations2D:{},PlayingAnimations1D:{},PlayingAnimations2D:{},UseIdleAnimation1D:{},UseIdleAnimation2D:{},IdleAnimation1D:{},IdleAnimation2D:{},IntervalUpdateFrame:void 0,updateFrame:function(){null==ChromaAnimation.IntervalUpdateFrame&&(ChromaAnimation.useIdleAnimations(!1),ChromaAnimation.IdleAnimation1D[EChromaSDKDevice1DEnum.DE_ChromaLink]={},ChromaAnimation.IdleAnimation1D[EChromaSDKDevice1DEnum.DE_Headset]={},ChromaAnimation.IdleAnimation1D[EChromaSDKDevice1DEnum.DE_Mousepad]={},ChromaAnimation.IdleAnimation2D[EChromaSDKDevice2DEnum.DE_Keyboard]={},ChromaAnimation.IdleAnimation2D[EChromaSDKDevice2DEnum.DE_Keypad]={},ChromaAnimation.IdleAnimation2D[EChromaSDKDevice2DEnum.DE_Mouse]={},ChromaAnimation.PlayingAnimations1D[EChromaSDKDevice1DEnum.DE_ChromaLink]={},ChromaAnimation.PlayingAnimations1D[EChromaSDKDevice1DEnum.DE_Headset]={},ChromaAnimation.PlayingAnimations1D[EChromaSDKDevice1DEnum.DE_Mousepad]={},ChromaAnimation.PlayingAnimations2D[EChromaSDKDevice2DEnum.DE_Keyboard]={},ChromaAnimation.PlayingAnimations2D[EChromaSDKDevice2DEnum.DE_Keypad]={},ChromaAnimation.PlayingAnimations2D[EChromaSDKDevice2DEnum.DE_Mouse]={},ChromaAnimation.IntervalUpdateFrame=setInterval(this.updateFrame,33));for(var e=0;e<EChromaSDKDevice1DEnum.DE_MAX;++e){var a=ChromaAnimation.getAnimation(ChromaAnimation.IdleAnimation1D[e]),o=!0;for(var r in ChromaAnimation.PlayingAnimations1D[e]){null!=(i=ChromaAnimation.PlayingAnimations1D[e][r])&&(i.playFrame(),a!=i&&(o=!1))}o&&ChromaAnimation.UseIdleAnimation1D[e]&&null!=a&&a.playFrame()}for(e=0;e<EChromaSDKDevice2DEnum.DE_MAX;++e){a=ChromaAnimation.getAnimation(ChromaAnimation.IdleAnimation2D[e]),o=!0;for(var r in ChromaAnimation.PlayingAnimations2D[e]){var i;null!=(i=ChromaAnimation.PlayingAnimations2D[e][r])&&(i.playFrame(),a!=i&&(o=!1))}o&&ChromaAnimation.UseIdleAnimation2D[e]&&null!=a&&a.playFrame()}},getMaxLeds:function(e){return e==EChromaSDKDevice1DEnum.DE_ChromaLink?5:e==EChromaSDKDevice1DEnum.DE_Headset?5:e==EChromaSDKDevice1DEnum.DE_Mousepad?15:void console.log("getMaxLeds: Invalid device!")},getMaxRow:function(e){return e==EChromaSDKDevice2DEnum.DE_Keyboard?6:e==EChromaSDKDevice2DEnum.DE_Keypad?4:e==EChromaSDKDevice2DEnum.DE_Mouse?9:void console.log("getMaxRow: Invalid device!")},getMaxColumn:function(e){return e==EChromaSDKDevice2DEnum.DE_Keyboard?22:e==EChromaSDKDevice2DEnum.DE_Keypad?5:e==EChromaSDKDevice2DEnum.DE_Mouse?7:void console.log("getMaxColumn: Invalid device!")},openAnimation:function(e,a){var o=this,r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(200!=r.status)return void console.error("Animation is missing!",e);var i=r.response,n=0,m=4,t=new Uint32Array(i.slice(n,n+m))[0];if(n+=m,1!=t)return void console.log("openAnimation: Unsupported version!");m=1;var D=new Uint8Array(i.slice(n,n+m))[0];if(n+=m,D==EChromaSDKDeviceTypeEnum.DE_1D)(h=new ChromaAnimation1D).openAnimation(i,n),h.Name=e,o.LoadedAnimations[e]=h,a(h);else if(D==EChromaSDKDeviceTypeEnum.DE_2D){var h;(h=new ChromaAnimation2D).openAnimation(i,n),h.Name=e,o.LoadedAnimations[e]=h,null!=a&&a(h)}else null!=a&&a(void 0)}},r.open("GET",e,!0),r.responseType="arraybuffer",r.send("")},getDeviceType:e=>e==EChromaSDKDeviceEnum.DE_ChromaLink?EChromaSDKDeviceTypeEnum.DE_1D:e==EChromaSDKDeviceEnum.DE_Headset?EChromaSDKDeviceTypeEnum.DE_1D:e==EChromaSDKDeviceEnum.DE_Keyboard?EChromaSDKDeviceTypeEnum.DE_2D:e==EChromaSDKDeviceEnum.DE_Keypad?EChromaSDKDeviceTypeEnum.DE_2D:e==EChromaSDKDeviceEnum.DE_Mouse?EChromaSDKDeviceTypeEnum.DE_2D:e==EChromaSDKDeviceEnum.DE_Mousepad?EChromaSDKDeviceTypeEnum.DE_1D:void 0,getDevice1D:e=>e==EChromaSDKDeviceEnum.DE_ChromaLink?EChromaSDKDevice1DEnum.DE_ChromaLink:e==EChromaSDKDeviceEnum.DE_Headset?EChromaSDKDevice1DEnum.DE_Headset:e==EChromaSDKDeviceEnum.DE_Mousepad?EChromaSDKDevice1DEnum.DE_Mousepad:void 0,getDevice2D:e=>e==EChromaSDKDeviceEnum.DE_Keyboard?EChromaSDKDevice2DEnum.DE_Keyboard:e==EChromaSDKDeviceEnum.DE_Keypad?EChromaSDKDevice2DEnum.DE_Keypad:e==EChromaSDKDeviceEnum.DE_Mouse?EChromaSDKDevice2DEnum.DE_Mouse:void 0,getDeviceEnum(e,a){if(e==EChromaSDKDeviceTypeEnum.DE_1D){if(a==EChromaSDKDevice1DEnum.DE_ChromaLink)return EChromaSDKDeviceEnum.DE_ChromaLink;if(a==EChromaSDKDevice1DEnum.DE_Headset)return EChromaSDKDeviceEnum.DE_Headset;if(a==EChromaSDKDevice1DEnum.DE_Mousepad)return EChromaSDKDeviceEnum.DE_Mousepad}else{if(e!=EChromaSDKDeviceTypeEnum.DE_2D)return;if(a==EChromaSDKDevice2DEnum.DE_Keyboard)return EChromaSDKDeviceEnum.DE_Keyboard;if(a==EChromaSDKDevice2DEnum.DE_Keypad)return EChromaSDKDeviceEnum.DE_Keypad;if(a==EChromaSDKDevice2DEnum.DE_Mouse)return EChromaSDKDeviceEnum.DE_Mouse}},lerp:function(e,a,o){return(1-o)*e+o*a},lerpColor:function(e,a,o){return Math.floor(this.lerp(255&e,255&a,o))|Math.floor(this.lerp((65280&e)>>8,(65280&a)>>8,o))<<8|Math.floor(this.lerp((16711680&e)>>16,(16711680&a)>>16,o))<<16},getAnimation:function(e){var a=this.LoadedAnimations[e];return null==a?void 0:a},getFrameCount:function(e){var a=this.getAnimation(e);return null==a?0:a.getFrameCount()},stopByAnimationType:function(e){if(null!=chromaSDK){if(this.getDeviceType(e)==EChromaSDKDeviceTypeEnum.DE_1D){var a=this.getDevice1D(e);null!=(o=ChromaAnimation.LoadedAnimations1D[a])&&o.stop(),ChromaAnimation.LoadedAnimations1D[a]=void 0}else if(this.getDeviceType(e)==EChromaSDKDeviceTypeEnum.DE_2D){var o,r=this.getDevice2D(e);null!=(o=this.LoadedAnimations2D[r])&&o.stop(),this.LoadedAnimations2D[r]=void 0}}else setTimeout(function(){ChromaAnimation.stopByAnimationType(e)},100)},stopAll:function(){this.stopByAnimationType(EChromaSDKDeviceEnum.DE_ChromaLink),this.stopByAnimationType(EChromaSDKDeviceEnum.DE_Headset),this.stopByAnimationType(EChromaSDKDeviceEnum.DE_Keyboard),this.stopByAnimationType(EChromaSDKDeviceEnum.DE_Keypad),this.stopByAnimationType(EChromaSDKDeviceEnum.DE_Mouse),this.stopByAnimationType(EChromaSDKDeviceEnum.DE_Mousepad)},isPlaying:function(e){return null!=chromaSDK&&(null!=this.LoadedAnimations[e]&&this.LoadedAnimations[e].isPlaying())},playAnimation:function(e,a,o){if(null!=chromaSDK)if(null==this.LoadedAnimations[e]){var r=this;ChromaAnimation.openAnimation(e,function(i){switch(r.LoadedAnimations[e]=i,i.FrameCallback=o,i.DeviceType){case EChromaSDKDeviceTypeEnum.DE_1D:ChromaAnimation.PlayingAnimations1D[i.Device][e]=i;break;case EChromaSDKDeviceTypeEnum.DE_2D:ChromaAnimation.PlayingAnimations2D[i.Device][e]=i}i.play(a)})}else{var i=this.LoadedAnimations[e];switch(i.FrameCallback=o,i.DeviceType){case EChromaSDKDeviceTypeEnum.DE_1D:ChromaAnimation.PlayingAnimations1D[i.Device][e]=i;break;case EChromaSDKDeviceTypeEnum.DE_2D:ChromaAnimation.PlayingAnimations2D[i.Device][e]=i}i.play(a)}else setTimeout(function(){ChromaAnimation.playAnimation(e,a,o)},100)},stopAnimation:function(e){var a=this.LoadedAnimations[e];if(null!=a)switch(this.LoadedAnimations[e].stop(),a.DeviceType){case EChromaSDKDeviceTypeEnum.DE_1D:ChromaAnimation.PlayingAnimations1D[a.Device][e]=void 0;break;case EChromaSDKDeviceTypeEnum.DE_2D:ChromaAnimation.PlayingAnimations2D[a.Device][e]=void 0}},closeAnimation:function(e){null!=this.LoadedAnimations[e]&&(this.LoadedAnimations[e].stop(),this.LoadedAnimations[e]=void 0)},useIdleAnimation:function(e,a){switch(e){case EChromaSDKDeviceEnum.DE_ChromaLink:ChromaAnimation.UseIdleAnimation1D[EChromaSDKDevice1DEnum.DE_ChromaLink]=a;break;case EChromaSDKDeviceEnum.DE_Headset:ChromaAnimation.UseIdleAnimation1D[EChromaSDKDevice1DEnum.DE_Headset]=a;break;case EChromaSDKDeviceEnum.DE_Mousepad:ChromaAnimation.UseIdleAnimation1D[EChromaSDKDevice1DEnum.DE_Mousepad]=a;break;case EChromaSDKDeviceEnum.DE_Keyboard:ChromaAnimation.UseIdleAnimation2D[EChromaSDKDevice2DEnum.DE_Keyboard]=a;break;case EChromaSDKDeviceEnum.DE_Keypad:ChromaAnimation.UseIdleAnimation2D[EChromaSDKDevice2DEnum.DE_Keypad]=a;break;case EChromaSDKDeviceEnum.DE_Mouse:ChromaAnimation.UseIdleAnimation2D[EChromaSDKDevice2DEnum.DE_Mouse]=a}},useIdleAnimations:function(e){ChromaAnimation.UseIdleAnimation1D[EChromaSDKDevice1DEnum.DE_ChromaLink]=e,ChromaAnimation.UseIdleAnimation1D[EChromaSDKDevice1DEnum.DE_Headset]=e,ChromaAnimation.UseIdleAnimation1D[EChromaSDKDevice1DEnum.DE_Mousepad]=e,ChromaAnimation.UseIdleAnimation2D[EChromaSDKDevice2DEnum.DE_Keyboard]=e,ChromaAnimation.UseIdleAnimation2D[EChromaSDKDevice2DEnum.DE_Keypad]=e,ChromaAnimation.UseIdleAnimation2D[EChromaSDKDevice2DEnum.DE_Mouse]=e},setIdleAnimation:function(e){var a=ChromaAnimation.LoadedAnimations[e];if(null==a)ChromaAnimation.openAnimation(e,function(a){switch(a.DeviceType){case EChromaSDKDeviceTypeEnum.DE_1D:ChromaAnimation.IdleAnimation1D[a.Device]=e;break;case EChromaSDKDeviceTypeEnum.DE_2D:ChromaAnimation.IdleAnimation2D[a.Device]=e}});else switch(a.DeviceType){case EChromaSDKDeviceTypeEnum.DE_1D:ChromaAnimation.IdleAnimation1D[a.Device]=e;break;case EChromaSDKDeviceTypeEnum.DE_2D:ChromaAnimation.IdleAnimation2D[a.Device]=e}},reverseAllFrames:function(e){var a=this.LoadedAnimations[e];null!=a&&(a.Frames=a.Frames.reverse())},setKeysColor:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var n=i.Frames,m=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),t=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(a>=0&&a<n.length)for(var D=n[a].Colors,h=0;h<m;++h)for(var s=D[h],E=0;E<t;++E)for(var v=0;v<o.length;++v){var l=o[v];getHighByte(l)==h&&getLowByte(l)==E&&(s[E]=r)}}},setKeysColorRGB:function(e,a,o,r,i,n){var m=this.LoadedAnimations[e];if(null!=m&&m.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&m.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var t=m.Frames,D=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),h=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),s=ChromaAnimation.getRGB(r,i,n);if(a>=0&&a<t.length)for(var E=t[a].Colors,v=0;v<D;++v)for(var l=E[v],u=0;u<h;++u)for(var C=0;C<o.length;++C){var c=o[C];getHighByte(c)==v&&getLowByte(c)==u&&(l[u]=s)}}},setKeyColor:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var n=i.Frames,m=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),t=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(a>=0&&a<n.length)for(var D=n[a].Colors,h=0;h<m;++h)for(var s=D[h],E=0;E<t;++E)getHighByte(o)==h&&getLowByte(o)==E&&(s[E]=r)}},setKeyColorAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var i=r.Frames,n=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),m=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),t=0;t<i.length;++t)for(var D=i[t].Colors,h=0;h<n;++h)for(var s=D[h],E=0;E<m;++E)getHighByte(a)==h&&getLowByte(a)==E&&(s[E]=o)},setKeyColorAllFramesRGB:function(e,a,o,r,i){var n=this.LoadedAnimations[e];if(null!=n&&n.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&n.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var m=n.Frames,t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=255&o|(255&r)<<8|(255&i)<<16,s=0;s<m.length;++s)for(var E=m[s].Colors,v=0;v<t;++v)for(var l=E[v],u=0;u<D;++u)getHighByte(a)==v&&getLowByte(a)==u&&(l[u]=h)},setKeysColorAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var i=r.Frames,n=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),m=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),t=0;t<i.length;++t)for(var D=i[t].Colors,h=0;h<n;++h)for(var s=D[h],E=0;E<m;++E)for(var v=0;v<a.length;++v){var l=a[v];getHighByte(l)==h&&getLowByte(l)==E&&(s[E]=o)}},setKeysColorAllFramesRGB:function(e,a,o,r,i){var n=this.LoadedAnimations[e];if(null!=n&&n.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&n.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var m=n.Frames,t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=255&o|(255&r)<<8|(255&i)<<16,s=0;s<m.length;++s)for(var E=m[s].Colors,v=0;v<t;++v)for(var l=E[v],u=0;u<D;++u)for(var C=0;C<a.length;++C){var c=a[C];getHighByte(c)==v&&getLowByte(c)==u&&(l[u]=h)}},copyKeyColorAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=this.LoadedAnimations[a];if(null!=i&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var n=r.Frames;if(0!=n.length){var m=i.Frames;if(0!=m.length)for(var t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=0;h<m.length;++h)for(var s=n[h%n.length],E=m[h],v=s.Colors,l=E.Colors,u=0;u<t;++u)for(var C=v[u],c=l[u],f=0;f<D;++f)getHighByte(o)==u&&getLowByte(o)==f&&(c[f]=C[f])}}}},copyKeyColorAllFramesOffset:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i){var n=this.LoadedAnimations[a];if(null!=n&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&n.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&n.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var m=i.Frames;if(0!=m.length){var t=n.Frames;if(0!=t.length)for(var D=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),h=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),s=0;s<m.length&&s+r<t.length;++s)for(var E=m[s],v=t[(s+r)%t.length],l=E.Colors,u=v.Colors,C=0;C<D;++C)for(var c=l[C],f=u[C],A=0;A<h;++A)getHighByte(o)==C&&getLowByte(o)==A&&(f[A]=c[A])}}}},copyKeysColorAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=this.LoadedAnimations[a];if(null!=i&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var n=r.Frames;if(0!=n.length){var m=i.Frames;if(0!=m.length)for(var t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=0;h<m.length;++h)for(var s=n[h%n.length],E=m[h],v=s.Colors,l=E.Colors,u=0;u<t;++u)for(var C=v[u],c=l[u],f=0;f<D;++f)for(var A=0;A<o.length;++A){var y=o[A];getHighByte(y)==u&&getLowByte(y)==f&&(c[f]=C[f])}}}}},copyNonZeroAllKeys:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=this.LoadedAnimations[a];if(null!=i&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var n=r.Frames;if(0!=n.length){var m=i.Frames;if(0!=m.length){var t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(o>=0&&o<m.length)for(var h=n[o%n.length],s=m[o],E=h.Colors,v=s.Colors,l=0;l<t;++l)for(var u=E[l],C=v[l],c=0;c<D;++c){var f=u[c];0!=f&&(C[c]=f)}}}}}},copyNonZeroAllKeysAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=this.LoadedAnimations[a];if(null!=r&&o.DeviceType==r.DeviceType&&o.Device==r.Device){var i=o.Frames;if(0!=i.length){var n=r.Frames;if(0!=n.length)if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var m=ChromaAnimation.getMaxLeds(o.Device),t=0;t<n.length;++t)for(var D=i[t%i.length],h=n[t],s=D.Colors,E=h.Colors,v=0;v<m;++v){0!=(A=s[v])&&(E[v]=A)}else if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var l=ChromaAnimation.getMaxRow(o.Device),u=ChromaAnimation.getMaxColumn(o.Device);for(t=0;t<n.length;++t)for(D=i[t%i.length],h=n[t],s=D.Colors,E=h.Colors,v=0;v<l;++v)for(var C=s[v],c=E[v],f=0;f<u;++f){var A;0!=(A=C[f])&&(c[f]=A)}}}}}},addNonZeroAllKeysAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=this.LoadedAnimations[a];if(null!=r&&o.DeviceType==r.DeviceType&&o.Device==r.Device){var i=o.Frames;if(0!=i.length){var n=r.Frames;if(0!=n.length)if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var m=ChromaAnimation.getMaxLeds(o.Device),t=0;t<n.length;++t)for(var D=i[t%i.length],h=n[t],s=D.Colors,E=h.Colors,v=0;v<m;++v){if(0!=(g=s[v])){var l=255&g,u=(65280&g)>>8,C=(16711680&g)>>16,c=255&(S=E[v]),f=(65280&S)>>8,A=(16711680&S)>>16,y=255&Math.min(255,Math.max(0,Number(c)+Number(l)))|(255&Math.min(255,Math.max(0,Number(f)+Number(u))))<<8|(255&Math.min(255,Math.max(0,Number(A)+Number(C))))<<16;E[v]=y}}else if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var d=ChromaAnimation.getMaxRow(o.Device),K=ChromaAnimation.getMaxColumn(o.Device);for(t=0;t<n.length;++t)for(D=i[t%i.length],h=n[t],s=D.Colors,E=h.Colors,v=0;v<d;++v)for(var p=s[v],_=E[v],M=0;M<K;++M){var g;if(0!=(g=p[M])){var S;l=255&g,u=(65280&g)>>8,C=(16711680&g)>>16,c=255&(S=_[M]),f=(65280&S)>>8,A=(16711680&S)>>16,y=255&Math.min(255,Math.max(0,Number(c)+Number(l)))|(255&Math.min(255,Math.max(0,Number(f)+Number(u))))<<8|(255&Math.min(255,Math.max(0,Number(A)+Number(C))))<<16;_[M]=y}}}}}}},subtractNonZeroAllKeysAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=this.LoadedAnimations[a];if(null!=r&&o.DeviceType==r.DeviceType&&o.Device==r.Device){var i=o.Frames;if(0!=i.length){var n=r.Frames;if(0!=n.length)if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var m=ChromaAnimation.getMaxLeds(o.Device),t=0;t<n.length;++t)for(var D=i[t%i.length],h=n[t],s=D.Colors,E=h.Colors,v=0;v<m;++v){if(0!=(g=s[v])){var l=255&g,u=(65280&g)>>8,C=(16711680&g)>>16,c=255&(S=E[v]),f=(65280&S)>>8,A=(16711680&S)>>16,y=255&Math.min(255,Math.max(0,Number(c)-Number(l)))|(255&Math.min(255,Math.max(0,Number(f)-Number(u))))<<8|(255&Math.min(255,Math.max(0,Number(A)-Number(C))))<<16;E[v]=y}}else if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var d=ChromaAnimation.getMaxRow(o.Device),K=ChromaAnimation.getMaxColumn(o.Device);for(t=0;t<n.length;++t)for(D=i[t%i.length],h=n[t],s=D.Colors,E=h.Colors,v=0;v<d;++v)for(var p=s[v],_=E[v],M=0;M<K;++M){var g;if(0!=(g=p[M])){var S;l=255&g,u=(65280&g)>>8,C=(16711680&g)>>16,c=255&(S=_[M]),f=(65280&S)>>8,A=(16711680&S)>>16,y=255&Math.min(255,Math.max(0,Number(c)-Number(l)))|(255&Math.min(255,Math.max(0,Number(f)-Number(u))))<<8|(255&Math.min(255,Math.max(0,Number(A)-Number(C))))<<16;_[M]=y}}}}}}},addNonZeroAllKeysAllFramesOffset:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=this.LoadedAnimations[a];if(null!=i&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var n=r.Frames;if(0!=n.length){var m=i.Frames;if(0!=m.length)for(var t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=n.length-1;h>=0;--h)for(var s=n[h],E=m[(h+o)%m.length],v=s.Colors,l=E.Colors,u=0;u<t;++u)for(var C=v[u],c=l[u],f=0;f<D;++f){var A=C[f];if(0!=A){var y=255&A,d=(65280&A)>>8,K=(16711680&A)>>16,p=c[f],_=255&p,M=(65280&p)>>8,g=(16711680&p)>>16,S=255&Math.min(255,Math.max(0,Number(_)+Number(y)))|(255&Math.min(255,Math.max(0,Number(M)+Number(d))))<<8|(255&Math.min(255,Math.max(0,Number(g)+Number(K))))<<16;c[f]=S}}}}}},subtractNonZeroAllKeysAllFramesOffset:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=this.LoadedAnimations[a];if(null!=i&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var n=r.Frames;if(0!=n.length){var m=i.Frames;if(0!=m.length)for(var t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=0;h<n.length&&h<m.length;++h)for(var s=n[h],E=m[(h+o)%m.length],v=s.Colors,l=E.Colors,u=0;u<t;++u)for(var C=v[u],c=l[u],f=0;f<D;++f){var A=C[f];if(0!=A){var y=255&A,d=(65280&A)>>8,K=(16711680&A)>>16,p=c[f],_=255&p,M=(65280&p)>>8,g=(16711680&p)>>16,S=255&Math.min(255,Math.max(0,Number(_)-Number(y)))|(255&Math.min(255,Math.max(0,Number(M)-Number(d))))<<8|(255&Math.min(255,Math.max(0,Number(g)-Number(K))))<<16;c[f]=S}}}}}},copyNonZeroAllKeysOffset:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i){var n=this.LoadedAnimations[a];if(null!=n&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&n.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&n.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var m=i.Frames;if(0!=m.length){var t=n.Frames;if(0!=t.length){var D=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),h=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(o>=0&&o<m.length)for(var s=m[o],E=t[(o+r)%t.length],v=s.Colors,l=E.Colors,u=0;u<D;++u)for(var C=v[u],c=l[u],f=0;f<h;++f){var A=C[f];0!=A&&(c[f]=A)}}}}}},copyNonZeroAllKeysAllFramesOffset:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=this.LoadedAnimations[a];if(null!=i&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var n=r.Frames;if(0!=n.length){var m=i.Frames;if(0!=m.length)for(var t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=0;h<n.length&&h+o<m.length;++h)for(var s=n[h],E=m[(h+o)%m.length],v=s.Colors,l=E.Colors,u=0;u<t;++u)for(var C=v[u],c=l[u],f=0;f<D;++f){var A=C[f];0!=A&&(c[f]=A)}}}}},copyNonZeroTargetAllKeys:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=this.LoadedAnimations[a];if(null!=i&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var n=r.Frames;if(0!=n.length){var m=i.Frames;if(0!=m.length){var t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(o>=0&&o<m.length)for(var h=n[o%n.length],s=m[o],E=h.Colors,v=s.Colors,l=0;l<t;++l)for(var u=E[l],C=v[l],c=0;c<D;++c){var f=u[c];0!=f&&0!=C[c]&&(C[c]=f)}}}}}},copyNonZeroTargetAllKeysAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=this.LoadedAnimations[a];if(null!=r){var i=o.Frames;if(0!=i.length){var n=r.Frames;if(0!=n.length)if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var m=ChromaAnimation.getMaxLeds(o.Device),t=0;t<n.length;++t)for(var D=i[t%i.length],h=n[t],s=D.Colors,E=h.Colors,v=0;v<m;++v){var l=s[v],u=E[v];0!=l&&0!=u&&(E[v]=l)}else if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var C=ChromaAnimation.getMaxRow(o.Device),c=ChromaAnimation.getMaxColumn(o.Device);for(t=0;t<n.length;++t)for(D=i[t%i.length],h=n[t],s=D.Colors,E=h.Colors,v=0;v<C;++v)for(var f=s[v],A=E[v],y=0;y<c;++y){var d=f[y];0!=d&&0!=A[y]&&(A[y]=d)}}}}}},copyNonZeroTargetZeroAllKeysAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=this.LoadedAnimations[a];if(null!=r&&o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&o.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var i=o.Frames;if(0!=i.length){var n=r.Frames;if(0!=n.length)for(var m=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),t=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),D=0;D<n.length;++D)for(var h=i[D%i.length],s=n[D],E=h.Colors,v=s.Colors,l=0;l<m;++l)for(var u=E[l],C=v[l],c=0;c<t;++c){var f=u[c];0!=f&&0==C[c]&&(C[c]=f)}}}}},copyNonZeroTargetAllKeysAllFramesOffset:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=this.LoadedAnimations[a];if(null!=i&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var n=r.Frames;if(0!=n.length){var m=i.Frames;if(0!=m.length)for(var t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=0;h<m.length;++h)for(var s=n[h],E=m[(h+o)%m.length],v=s.Colors,l=E.Colors,u=0;u<t;++u)for(var C=v[u],c=l[u],f=0;f<D;++f){var A=C[f];0!=A&&0!=c[f]&&(c[f]=A)}}}}},addNonZeroTargetAllKeysAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=this.LoadedAnimations[a];if(null!=r&&o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&o.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var i=o.Frames;if(0!=i.length){var n=r.Frames;if(0!=n.length)for(var m=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),t=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),D=0;D<n.length;++D)for(var h=i[D%i.length],s=n[D],E=h.Colors,v=s.Colors,l=0;l<m;++l)for(var u=E[l],C=v[l],c=0;c<t;++c){var f=u[c];if(0!=f&&0!=C[c]){var A=255&f,y=(65280&f)>>8,d=(16711680&f)>>16,K=C[c],p=255&K,_=(65280&K)>>8,M=(16711680&K)>>16,g=255&Math.min(255,Math.max(0,Number(p)+Number(A)))|(255&Math.min(255,Math.max(0,Number(_)+Number(y))))<<8|(255&Math.min(255,Math.max(0,Number(M)+Number(d))))<<16;C[c]=g}}}}}},subtractNonZeroTargetAllKeysAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=this.LoadedAnimations[a];if(null!=r&&o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&o.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var i=o.Frames;if(0!=i.length){var n=r.Frames;if(0!=n.length)for(var m=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),t=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),D=0;D<n.length;++D)for(var h=i[D%i.length],s=n[D],E=h.Colors,v=s.Colors,l=0;l<m;++l)for(var u=E[l],C=v[l],c=0;c<t;++c){var f=u[c];if(0!=f&&0!=C[c]){var A=255&f,y=(65280&f)>>8,d=(16711680&f)>>16,K=C[c],p=255&K,_=(65280&K)>>8,M=(16711680&K)>>16,g=255&Math.min(255,Math.max(0,Number(p)-Number(A)))|(255&Math.min(255,Math.max(0,Number(_)-Number(y))))<<8|(255&Math.min(255,Math.max(0,Number(M)-Number(d))))<<16;C[c]=g}}}}}},copyZeroTargetAllKeysAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=this.LoadedAnimations[a];if(null!=r&&o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&o.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var i=o.Frames;if(0!=i.length){var n=r.Frames;if(0!=n.length)for(var m=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),t=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),D=0;D<n.length;++D)for(var h=i[D%i.length],s=n[D],E=h.Colors,v=s.Colors,l=0;l<m;++l)for(var u=E[l],C=v[l],c=0;c<t;++c){var f=u[c];0==f&&0!=C[c]&&(C[c]=f)}}}}},copyZeroTargetZeroAllKeysAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=this.LoadedAnimations[a];if(null!=r&&o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&o.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var i=o.Frames;if(0!=i.length){var n=r.Frames;if(0!=n.length)for(var m=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),t=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),D=0;D<n.length;++D)for(var h=i[D%i.length],s=n[D],E=h.Colors,v=s.Colors,l=0;l<m;++l)for(var u=E[l],C=v[l],c=0;c<t;++c){var f=u[c];0==f&&0==C[c]&&(C[c]=f)}}}}},fillColor:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=r.Frames;if(0!=i.length)if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){var n=ChromaAnimation.getMaxLeds(r.Device);if(a>=0&&a<i.length)for(var m=i[a].Colors,t=0;t<n;++t){m[t];m[t]=o}}else if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var D=ChromaAnimation.getMaxRow(r.Device),h=ChromaAnimation.getMaxColumn(r.Device);if(a>=0&&a<i.length)for(m=i[a].Colors,t=0;t<D;++t)for(var s=m[t],E=0;E<h;++E){s[E];s[E]=o}}}},fillNonZeroColor:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=r.Frames;if(0!=i.length){var n=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),m=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(a>=0&&a<i.length)for(var t=i[a].Colors,D=0;D<n;++D)for(var h=t[D],s=0;s<m;++s){0!=h[s]&&(h[s]=o)}}}},fillNonZeroColorRGB:function(e,a,o,r,i){var n=this.LoadedAnimations[e];if(null!=n){var m=n.Frames;if(0!=m.length){var t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=ChromaAnimation.getRGB(o,r,i);if(a>=0&&a<m.length)for(var s=m[a].Colors,E=0;E<t;++E)for(var v=s[E],l=0;l<D;++l){0!=v[l]&&(v[l]=h)}}}},fillNonZeroColorAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=o.Frames;if(0!=r.length)for(var i=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),n=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),m=0;m<r.length;++m)for(var t=r[m].Colors,D=0;D<i;++D)for(var h=t[D],s=0;s<n;++s){0!=h[s]&&(h[s]=a)}}},fillNonZeroColorAllFramesRGB:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i){var n=i.Frames;if(0!=n.length){var m=a|o<<8|r<<16;if(i.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var t=ChromaAnimation.getMaxLeds(i.Device),D=0;D<n.length;++D)for(var h=n[D].Colors,s=0;s<t;++s){0!=h[s]&&(h[s]=m)}else if(i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var E=ChromaAnimation.getMaxRow(i.Device),v=ChromaAnimation.getMaxColumn(i.Device);for(D=0;D<n.length;++D)for(h=n[D].Colors,s=0;s<E;++s)for(var l=h[s],u=0;u<v;++u){0!=l[u]&&(l[u]=m)}}}}},fillZeroColor:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=r.Frames;if(0!=i.length)if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){var n=ChromaAnimation.getMaxLeds(r.Device);if(a>=0&&a<i.length)for(var m=i[a].Colors,t=0;t<n;++t){0==m[t]&&(m[t]=o)}}else if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var D=ChromaAnimation.getMaxRow(r.Device),h=ChromaAnimation.getMaxColumn(r.Device);if(a>=0&&a<i.length)for(m=i[a].Colors,t=0;t<D;++t)for(var s=m[t],E=0;E<h;++E){0==s[E]&&(s[E]=o)}}}},fillZeroColorAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=o.Frames;if(0!=r.length)if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var i=ChromaAnimation.getMaxLeds(o.Device),n=0;n<r.length;++n)for(var m=r[n].Colors,t=0;t<i;++t){0==m[t]&&(m[t]=a)}else if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var D=ChromaAnimation.getMaxRow(o.Device),h=ChromaAnimation.getMaxColumn(o.Device);for(n=0;n<r.length;++n)for(m=r[n].Colors,t=0;t<D;++t)for(var s=m[t],E=0;E<h;++E){0==s[E]&&(s[E]=a)}}}},fillZeroColorAllFramesRGB:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i){var n=i.Frames;if(0!=n.length){var m=a|o<<8|r<<16;if(i.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var t=ChromaAnimation.getMaxLeds(i.Device),D=0;D<n.length;++D)for(var h=n[D].Colors,s=0;s<t;++s){0==h[s]&&(h[s]=m)}else if(i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var E=ChromaAnimation.getMaxRow(i.Device),v=ChromaAnimation.getMaxColumn(i.Device);for(D=0;D<n.length;++D)for(h=n[D].Colors,s=0;s<E;++s)for(var l=h[s],u=0;u<v;++u){0==l[u]&&(l[u]=m)}}}}},fillThresholdColors:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i){var n=i.Frames;if(0!=n.length){var m=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),t=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(a>=0&&a<n.length)for(var D=n[a].Colors,h=0;h<m;++h)for(var s=D[h],E=0;E<t;++E){var v=s[E],l=255&v,u=(65280&v)>>8,C=(16711680&v)>>16;0!=l&&0!=u&&0!=C&&l<=o&&u<=o&&C<=o&&(s[E]=r)}}}},fillThresholdColorsAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=r.Frames;if(0!=i.length)if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var n=ChromaAnimation.getMaxLeds(r.Device),m=0;m<i.length;++m)for(var t=i[m].Colors,D=0;D<n;++D){var h=(65280&(C=t[D]))>>8,s=(16711680&C)>>16;(0!=(c=255&C)||0!=h||0!=s)&&c<=a&&h<=a&&s<=a&&(t[D]=o)}else if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var E=ChromaAnimation.getMaxRow(r.Device),v=ChromaAnimation.getMaxColumn(r.Device);for(m=0;m<i.length;++m)for(t=i[m].Colors,D=0;D<E;++D)for(var l=t[D],u=0;u<v;++u){var C,c;h=(65280&(C=l[u]))>>8,s=(16711680&C)>>16;(0!=(c=255&C)||0!=h||0!=s)&&c<=a&&h<=a&&s<=a&&(l[u]=o)}}}},fillThresholdColorsRGB:function(e,a,o,r,i,n){var m=this.LoadedAnimations[e];if(null!=m){var t=m.Frames;if(0!=t.length)if(m.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){var D=ChromaAnimation.getMaxLeds(m.Device),h=ChromaAnimation.getRGB(r,i,n);if(a>=0&&a<t.length)for(var s=t[a].Colors,E=0;E<D;++E){i=(65280&(c=s[E]))>>8,n=(16711680&c)>>16;(0!=(r=255&c)||0!=i||0!=n)&&r<=o&&i<=o&&n<=o&&(s[E]=h)}}else if(m.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var v=ChromaAnimation.getMaxRow(m.Device),l=ChromaAnimation.getMaxColumn(m.Device);h=ChromaAnimation.getRGB(r,i,n);if(a>=0&&a<t.length)for(s=t[a].Colors,E=0;E<v;++E)for(var u=s[E],C=0;C<l;++C){var c;i=(65280&(c=u[C]))>>8,n=(16711680&c)>>16;(0!=(r=255&c)||0!=i||0!=n)&&r<=o&&i<=o&&n<=o&&(u[C]=h)}}}},fillThresholdColorsAllFramesRGB:function(e,a,o,r,i){var n=this.LoadedAnimations[e];if(null!=n){var m=n.Frames;if(0!=m.length)if(n.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){ChromaAnimation.getMaxLeds(n.Device);for(var t=ChromaAnimation.getRGB(o,r,i),D=0;D<m.length;++D)for(var h=m[D].Colors,s=0;s<E;++s){r=(65280&(C=h[s]))>>8,i=(16711680&C)>>16;(0!=(o=255&C)||0!=r||0!=i)&&o<=a&&r<=a&&i<=a&&(h[s]=t)}}else if(n.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var E=ChromaAnimation.getMaxRow(n.Device),v=ChromaAnimation.getMaxColumn(n.Device);for(t=ChromaAnimation.getRGB(o,r,i),D=0;D<m.length;++D)for(h=m[D].Colors,s=0;s<E;++s)for(var l=h[s],u=0;u<v;++u){var C;r=(65280&(C=l[u]))>>8,i=(16711680&C)>>16;(0!=(o=255&C)||0!=r||0!=i)&&o<=a&&r<=a&&i<=a&&(l[u]=t)}}}},fillThresholdColorsMinMaxRGB:function(e,a,o,r,i,n,m,t,D,h){var s=this.LoadedAnimations[e];if(null!=s){var E=s.Frames;if(0!=E.length){var v=ChromaAnimation.getRGB(r,i,n),l=ChromaAnimation.getRGB(t,D,h);if(s.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){var u=ChromaAnimation.getMaxLeds(s.Device);if(a>=0&&a<E.length)for(var C=E[a].Colors,c=0;c<u;++c){var f=(65280&(_=C[c]))>>8,A=(16711680&_)>>16;0==(M=255&_)&&0==f&&0==A||(M<=o&&f<=o&&A<=o?C[c]=v:(M>=m||f>=m||A>=m)&&(C[c]=l))}}else if(s.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){var y=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),d=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(a>=0&&a<E.length)for(C=E[a].Colors,c=0;c<y;++c)for(var K=C[c],p=0;p<d;++p){var _,M;f=(65280&(_=K[p]))>>8,A=(16711680&_)>>16;0==(M=255&_)&&0==f&&0==A||(M<=o&&f<=o&&A<=o?K[p]=v:(M>=m||f>=m||A>=m)&&(K[p]=l))}}}}},fillThresholdColorsMinMaxAllFramesRGB:function(e,a,o,r,i,n,m,t,D){var h=this.LoadedAnimations[e];if(null!=h){var s=h.Frames;if(0!=s.length)if(h.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var E=ChromaAnimation.getMaxLeds(h.Device),v=ChromaAnimation.getRGB(o,r,i),l=ChromaAnimation.getRGB(m,t,D),u=0;u<s.length;++u)for(var C=s[u].Colors,c=0;c<E;++c){var f=(65280&(_=C[c]))>>8,A=(16711680&_)>>16;0==(M=255&_)&&0==f&&0==A||(M<=a&&f<=a&&A<=a?C[c]=v:(M>=n||f>=n||A>=n)&&(C[c]=l))}else if(h.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var y=ChromaAnimation.getMaxRow(h.Device),d=ChromaAnimation.getMaxColumn(h.Device);for(v=ChromaAnimation.getRGB(o,r,i),l=ChromaAnimation.getRGB(m,t,D),u=0;u<s.length;++u)for(C=s[u].Colors,c=0;c<y;++c)for(var K=C[c],p=0;p<d;++p){var _,M;f=(65280&(_=K[p]))>>8,A=(16711680&_)>>16;0==(M=255&_)&&0==f&&0==A||(M<=a&&f<=a&&A<=a?K[p]=v:(M>=n||f>=n||A>=n)&&(K[p]=l))}}}},fillThresholdRGBColorsAllFramesRGB:function(e,a,o,r,i,n,m){var t=this.LoadedAnimations[e];if(null!=t){var D=t.Frames;if(0!=D.length)for(var h=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),s=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),E=ChromaAnimation.getRGB(i,n,m),v=0;v<D.length;++v)for(var l=D[v].Colors,u=0;u<h;++u)for(var C=l[u],c=0;c<s;++c){var f=C[c];n=(65280&f)>>8,m=(16711680&f)>>16;(0!=(i=255&f)||0!=n||0!=m)&&i<=a&&n<=o&&m<=r&&(C[c]=E)}}},fillRandomColors:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=o.Frames;if(0!=r.length){var i=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),n=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(a>=0&&a<r.length)for(var m=r[a].Colors,t=0;t<i;++t)for(var D=m[t],h=0;h<n;++h){var s=Math.floor(256*Math.random())%256|Math.floor(256*Math.random())%256<<8|Math.floor(256*Math.random())%256<<16;D[h]=s}}}},fillRandomColorsAllFrames:function(e){var a=this.LoadedAnimations[e];if(null!=a){var o=a.Frames;if(0!=o.length)if(a.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var r=ChromaAnimation.getMaxLeds(a.Device),i=0;i<o.length;++i)for(var n=o[i].Colors,m=0;m<r;++m){var t=Math.floor(256*Math.random())%256|Math.floor(256*Math.random())%256<<8|Math.floor(256*Math.random())%256<<16;n[m]=t}else if(a.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var D=ChromaAnimation.getMaxRow(a.Device),h=ChromaAnimation.getMaxColumn(a.Device);for(i=0;i<o.length;++i)for(n=o[i].Colors,m=0;m<D;++m)for(var s=n[m],E=0;E<h;++E){t=Math.floor(256*Math.random())%256|Math.floor(256*Math.random())%256<<8|Math.floor(256*Math.random())%256<<16;s[E]=t}}}},fillRandomColorsBlackAndWhite:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=o.Frames;if(0!=r.length){var i=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),n=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(a>=0&&a<r.length)for(var m=r[a].Colors,t=0;t<i;++t)for(var D=m[t],h=0;h<n;++h){var s=Math.floor(256*Math.random())%256,E=s|s<<8|s<<16;D[h]=E}}}},fillRandomColorsBlackAndWhiteAllFrames:function(e){var a=this.LoadedAnimations[e];if(null!=a){var o=a.Frames;if(0!=o.length)if(a.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var r=ChromaAnimation.getMaxLeds(a.Device),i=0;i<o.length;++i)for(var n=o[i].Colors,m=0;m<r;++m){var t=(v=Math.floor(256*Math.random())%256)|v<<8|v<<16;n[m]=t}else if(a.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var D=ChromaAnimation.getMaxRow(a.Device),h=ChromaAnimation.getMaxColumn(a.Device);for(i=0;i<o.length;++i)for(n=o[i].Colors,m=0;m<D;++m)for(var s=n[m],E=0;E<h;++E){var v;t=(v=Math.floor(256*Math.random())%256)|v<<8|v<<16;s[E]=t}}}},invertColorsAllFrames:function(e){var a=this.LoadedAnimations[e];if(null!=a){var o=a.Frames;if(0!=o.length)if(a.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var r=ChromaAnimation.getMaxLeds(a.Device),i=0;i<o.length;++i)for(var n=o[i].Colors,m=0;m<r;++m){E=255-(255&(E=n[m]))|255-((65280&E)>>8)<<8|255-((16711680&E)>>16)<<16,n[m]=E}else if(a.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var t=ChromaAnimation.getMaxRow(a.Device),D=ChromaAnimation.getMaxColumn(a.Device);for(i=0;i<o.length;++i)for(n=o[i].Colors,m=0;m<t;++m)for(var h=n[m],s=0;s<D;++s){var E;E=255-(255&(E=h[s]))|255-((65280&E)>>8)<<8|255-((16711680&E)>>16)<<16,h[s]=E}}}},insertFrame:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r)if(this.stopAnimation(e),0!=r.Frames.length){if(!(a<0||a>=r.Frames.length)){var i=r.Frames[a],n=[];if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var m=ChromaAnimation.getMaxLeds(r.Device),t=0;t<r.Frames.length;++t){var D=r.Frames[t];if(t==o){(v=new ChromaAnimationFrame1D).Colors=new Array(m);for(var h=0;h<m;++h)v.Colors[h]=i.Colors[h];v.Duration=i.Duration,n.push(v)}n.push(D)}else if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var s=ChromaAnimation.getMaxRow(r.Device),E=ChromaAnimation.getMaxColumn(r.Device);for(t=0;t<r.Frames.length;++t){D=r.Frames[t];if(t==o){var v;(v=new ChromaAnimationFrame2D).Colors=new Array(s);for(h=0;h<s;++h){v.Colors[h]=new Array(E);for(var l=0;l<E;++l)v.Colors[h][l]=i.Colors[h][l]}v.Duration=i.Duration,n.push(v)}n.push(D)}}r.Frames=n}}else console.error("insertFrame","Frame length is zero!",e)},insertDelay:function(e,a,o){for(var r=0;r<o;++r)this.insertFrame(e,a,a)},appendAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=this.LoadedAnimations[a];if(null!=r)if(this.stopAnimation(a),0!=o.Frames.length){var i=o.Frames,n=r.Frames,m=i.length;if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var t=ChromaAnimation.getMaxLeds(o.Device),D=0;D<m;++D){var h=i[D];(l=new ChromaAnimationFrame1D).Colors=new Array(t);for(var s=0;s<t;++s)l.Colors[s]=h.Colors[s];l.Duration=h.Duration,n.push(l)}else if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var E=ChromaAnimation.getMaxRow(o.Device),v=ChromaAnimation.getMaxColumn(o.Device);for(D=0;D<m;++D){var l;h=i[D];(l=new ChromaAnimationFrame2D).Colors=new Array(E);for(s=0;s<E;++s){l.Colors[s]=new Array(v);for(var u=0;u<v;++u)l.Colors[s][u]=h.Colors[s][u]}l.Duration=h.Duration,n.push(l)}}}else console.error("appendAllFrames","Source Frame length is zero!",animationName)}},duplicateFirstFrame:function(e,a){var o=this.LoadedAnimations[e];if(null!=o)if(this.stopAnimation(e),0!=o.Frames.length){var r=o.Frames[0],i=[];if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){for(var n=ChromaAnimation.getMaxLeds(o.Device),m=0;m<a;++m){(s=new ChromaAnimationFrame1D).Colors=new Array(n);for(var t=0;t<n;++t)s.Colors[t]=r.Colors[t];s.Duration=r.Duration,i.push(s)}o.Frames=i}else if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var D=ChromaAnimation.getMaxRow(o.Device),h=ChromaAnimation.getMaxColumn(o.Device);for(m=0;m<a;++m){var s;(s=new ChromaAnimationFrame2D).Colors=new Array(D);for(t=0;t<D;++t){s.Colors[t]=new Array(h);for(var E=0;E<h;++E)s.Colors[t][E]=r.Colors[t][E]}s.Duration=r.Duration,i.push(s)}o.Frames=i}}else console.error("duplicateFirstFrame","Frame length is zero!",e)},duplicateFrames:function(e){var a=this.LoadedAnimations[e];if(null!=a)if(this.stopAnimation(e),0!=a.Frames.length){var o=[],r=a.Frames.length;if(a.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){for(var i=ChromaAnimation.getMaxLeds(a.Device),n=0;n<r;++n)for(var m=0;m<2;++m){var t=a.Frames[n];(E=new ChromaAnimationFrame1D).Colors=new Array(i);for(var D=0;D<i;++D)E.Colors[D]=t.Colors[D];E.Duration=t.Duration,o.push(E)}a.Frames=o}else if(a.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var h=ChromaAnimation.getMaxRow(a.Device),s=ChromaAnimation.getMaxColumn(a.Device);for(n=0;n<r;++n)for(m=0;m<2;++m){var E;t=a.Frames[n];(E=new ChromaAnimationFrame2D).Colors=new Array(h);for(D=0;D<h;++D){E.Colors[D]=new Array(s);for(var v=0;v<s;++v)E.Colors[D][v]=t.Colors[D][v]}E.Duration=t.Duration,o.push(E)}}a.Frames=o}else console.error("duplicateFrames","Frame length is zero!",e)},duplicateMirrorFrames:function(e){var a=this.LoadedAnimations[e];if(null!=a)if(this.stopAnimation(e),0!=a.Frames.length){var o=[];if(a.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){for(var r=ChromaAnimation.getMaxLeds(a.Device),i=a.Frames.length,n=0;n<i;++n){var m=a.Frames[n];(E=new ChromaAnimationFrame1D).Colors=new Array(r);for(var t=0;t<r;++t)E.Colors[t]=m.Colors[t];E.Duration=m.Duration,o.push(E)}for(n=i-1;n>=0;--n){m=a.Frames[n];(E=new ChromaAnimationFrame1D).Colors=new Array(r);for(t=0;t<r;++t)E.Colors[t]=m.Colors[t];E.Duration=m.Duration,o.push(E)}a.Frames=o}else if(a.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var D=ChromaAnimation.getMaxRow(a.Device),h=ChromaAnimation.getMaxColumn(a.Device);for(i=a.Frames.length,n=0;n<i;++n){m=a.Frames[n];(E=new ChromaAnimationFrame2D).Colors=new Array(D);for(t=0;t<D;++t){E.Colors[t]=new Array(h);for(var s=0;s<h;++s)E.Colors[t][s]=m.Colors[t][s]}E.Duration=m.Duration,o.push(E)}for(n=i-1;n>=0;--n){var E;m=a.Frames[n];(E=new ChromaAnimationFrame2D).Colors=new Array(D);for(t=0;t<D;++t){E.Colors[t]=new Array(h);for(s=0;s<h;++s)E.Colors[t][s]=m.Colors[t][s]}E.Duration=m.Duration,o.push(E)}a.Frames=o}}else console.error("duplcateMirrorFrames","Frame length is zero!",e)},copyAnimation:function(e,a){var o=this.LoadedAnimations[e];if(null!=o)if(0!=o.Frames.length){var r=[],i=o.Frames.length;if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){for(var n=ChromaAnimation.getMaxLeds(o.Device),m=0;m<i;++m){var t=o.Frames[m];(E=new ChromaAnimationFrame1D).Colors=new Array(n);for(var D=0;D<n;++D)E.Colors[D]=t.Colors[D];E.Duration=t.Duration,r.push(E)}(l=new ChromaAnimation1D).Device=o.Device,l.DeviceType=o.DeviceType,l.Frames=r,this.LoadedAnimations[a]=l}else if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var h=ChromaAnimation.getMaxRow(o.Device),s=ChromaAnimation.getMaxColumn(o.Device);for(m=0;m<i;++m){var E;t=o.Frames[m];(E=new ChromaAnimationFrame2D).Colors=new Array(h);for(D=0;D<h;++D){E.Colors[D]=new Array(s);for(var v=0;v<s;++v)E.Colors[D][v]=t.Colors[D][v]}E.Duration=t.Duration,r.push(E)}var l;(l=new ChromaAnimation2D).Device=o.Device,l.DeviceType=o.DeviceType,l.Frames=r,this.LoadedAnimations[a]=l}}else console.error("duplicateFirstFrame","Frame length is zero!",e)},convertAnimation:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i)if(0!=i.Frames.length){ChromaAnimation.closeAnimation(a);var n=[],m=i.Frames.length,t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(o==EChromaSDKDeviceTypeEnum.DE_1D){for(var h=0;h<m;++h){var s=i.Frames[h],E=ChromaAnimation.getMaxLeds(r);(u=new ChromaAnimationFrame1D).Colors=new Array(E);for(var v=0;v<t;++v)if(!(v>=1))for(var l=0;l<D;++l)l>=E||(u.Colors[l]=s.Colors[v][l]);u.Duration=s.Duration,n.push(u)}return(A=new ChromaAnimation1D).Name=a,A.Device=r,A.DeviceType=o,A.Frames=n,this.LoadedAnimations[a]=A,A}if(o==EChromaSDKDeviceTypeEnum.DE_2D){for(h=0;h<m;++h){s=i.Frames[h];var u,C=ChromaAnimation.getMaxRow(r),c=ChromaAnimation.getMaxColumn(r);(u=new ChromaAnimationFrame2D).Colors=new Array(C);for(v=0;v<t||v<C;++v)if(!(v>=C)){u.Colors[v]=new Array(c);for(l=0;l<D||l<c;++l)if(!(l>=c)){var f=void 0;f=v>=t||l>=D?0:s.Colors[v][l],u.Colors[v][l]=f}}u.Duration=s.Duration,n.push(u)}var A;return(A=new ChromaAnimation2D).Name=a,A.Device=r,A.DeviceType=o,A.Frames=n,this.LoadedAnimations[a]=A,A}}else console.error("duplicateFirstFrame","Frame length is zero!",e)},createAnimation:function(e,a,o){this.closeAnimation(e);var r=[];if(a==EChromaSDKDeviceTypeEnum.DE_1D){for(var i=ChromaAnimation.getMaxLeds(o),n=0;n<1;++n){(h=new ChromaAnimationFrame1D).Colors=new Array(i);for(var m=0;m<i;++m)h.Colors[m]=0;h.Duration=.1,r.push(h)}(E=new ChromaAnimation1D).Device=o,E.DeviceType=a,E.Frames=r,this.LoadedAnimations[e]=E}else if(a==EChromaSDKDeviceTypeEnum.DE_2D){var t=ChromaAnimation.getMaxRow(o),D=ChromaAnimation.getMaxColumn(o);for(n=0;n<1;++n){var h;(h=new ChromaAnimationFrame2D).Colors=new Array(t);for(m=0;m<t;++m){h.Colors[m]=new Array(D);for(var s=0;s<D;++s)h.Colors[m][s]=0}h.Duration=.1,r.push(h)}var E;(E=new ChromaAnimation2D).Device=o,E.DeviceType=a,E.Frames=r,this.LoadedAnimations[e]=E}},reduceFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o)if(this.stopAnimation(e),0!=o.Frames.length){var r=[];if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){for(var i=ChromaAnimation.getMaxLeds(o.Device),n=o.Frames.length,m=0;m<n;++m)if(m%a!=0){var t=o.Frames[m];(E=new ChromaAnimationFrame1D).Colors=new Array(i);for(var D=0;D<i;++D)E.Colors[D]=t.Colors[D];E.Duration=t.Duration,r.push(E)}}else if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var h=ChromaAnimation.getMaxRow(o.Device),s=ChromaAnimation.getMaxColumn(o.Device);for(n=o.Frames.length,m=0;m<n;++m)if(m%a!=0){var E;t=o.Frames[m];(E=new ChromaAnimationFrame2D).Colors=new Array(h);for(D=0;D<h;++D){E.Colors[D]=new Array(s);for(var v=0;v<s;++v)E.Colors[D][v]=t.Colors[D][v]}E.Duration=t.Duration,r.push(E)}}o.Frames=r}else console.error("duplicateFirstFrame","Frame length is zero!",e)},trimFrame:function(e,a){var o=this.LoadedAnimations[e];if(null!=o)if(this.stopAnimation(e),0!=o.Frames.length){for(var r=[],i=(ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),o.Frames.length),n=0;n<i;++n)if(n!=a){var m=o.Frames[n];r.push(m)}o.Frames=r}else console.error("duplicateFirstFrame","Frame length is zero!",e)},trimStartFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o)if(this.stopAnimation(e),0!=o.Frames.length)for(var r=0;r<a;++r)this.trimFrame(e,0);else console.error("trimStartFrames","Frame length is zero!",e)},trimEndFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o)if(this.stopAnimation(e),0!=o.Frames.length)for(;a>=0&&a+1<o.Frames.length;)this.trimFrame(e,o.Frames.length-1);else console.error("trimEndFrames","Frame length is zero!",e)},fadeStartFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o)if(this.stopAnimation(e),0!=o.Frames.length){if(!(a<=0))for(var r=0;r<a;++r){var i=(r+1)/a;this.multiplyIntensity(e,r,i)}}else console.error("fadeStartFrames","Frame length is zero!",e)},fadeEndFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o)if(this.stopAnimation(e),0!=o.Frames.length){if(!(a<=0))for(var r=0;r<a;++r){var i=o.Frames.length-1-r,n=(r+1)/a;this.multiplyIntensity(e,i,n)}}else console.error("fadeEndFrames","Frame length is zero!",e)},makeBlankFrames:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i){this.stopAnimation(e);var n=[];if(i.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var m=ChromaAnimation.getMaxLeds(i.Device),t=0;t<a;++t){(E=new ChromaAnimationFrame1D).Colors=new Array(m);for(var D=0;D<m;++D)E.Colors[D]=r;E.Duration=o,n.push(E)}else if(i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var h=ChromaAnimation.getMaxRow(i.Device),s=ChromaAnimation.getMaxColumn(i.Device);for(t=0;t<a;++t){var E;(E=new ChromaAnimationFrame2D).Colors=new Array(h);for(D=0;D<h;++D){E.Colors[D]=new Array(s);for(var v=0;v<s;++v)E.Colors[D][v]=r}E.Duration=o,n.push(E)}}i.Frames=n}},makeBlankFramesRGB:function(e,a,o,r,i,n){var m=this.LoadedAnimations[e];if(null!=m){this.stopAnimation(e);var t=[],D=ChromaAnimation.getRGB(r,i,n);if(m.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var h=ChromaAnimation.getMaxLeds(m.Device),s=0;s<a;++s){(u=new ChromaAnimationFrame1D).Colors=new Array(h);for(var E=0;E<h;++E)u.Colors[E]=D;u.Duration=o,t.push(u)}else if(m.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var v=ChromaAnimation.getMaxRow(m.Device),l=ChromaAnimation.getMaxColumn(m.Device);for(s=0;s<a;++s){var u;(u=new ChromaAnimationFrame2D).Colors=new Array(v);for(E=0;E<v;++E){u.Colors[E]=new Array(l);for(var C=0;C<l;++C)u.Colors[E][C]=D}u.Duration=o,t.push(u)}}m.Frames=t}},offsetColors:function(e,a,o,r,i){var n=this.LoadedAnimations[e];if(null!=n){var m=n.Frames;if(n.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){var t=ChromaAnimation.getMaxLeds(n.Device);if(a>=0&&a<m.length)for(var D=m[a].Colors,h=0;h<t;++h){var s=255&(f=D[h]),E=(65280&f)>>8,v=(16711680&f)>>16;f=(s=255&Math.min(255,Math.max(0,Number(s)+Number(o))))|(E=255&Math.min(255,Math.max(0,Number(E)+Number(r))))<<8|(v=255&Math.min(255,Math.max(0,Number(v)+Number(i))))<<16,D[h]=f}}else if(n.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var l=ChromaAnimation.getMaxRow(n.Device),u=ChromaAnimation.getMaxColumn(n.Device);if(a>=0&&a<m.length)for(D=m[a].Colors,h=0;h<l;++h)for(var C=D[h],c=0;c<u;++c){var f;s=255&(f=C[c]),E=(65280&f)>>8,v=(16711680&f)>>16;f=(s=255&Math.min(255,Math.max(0,Number(s)+Number(o))))|(E=255&Math.min(255,Math.max(0,Number(E)+Number(r))))<<8|(v=255&Math.min(255,Math.max(0,Number(v)+Number(i))))<<16,C[c]=f}}}},offsetColorsWithColor:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var i=255&o,n=(65280&o)>>8,m=(16711680&o)>>16,t=r.Frames,D=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),h=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(a>=0&&a<t.length)for(var s=t[a].Colors,E=0;E<D;++E)for(var v=s[E],l=0;l<h;++l){var u=255&(o=v[l]),C=(65280&o)>>8,c=(16711680&o)>>16;o=(u=255&Math.min(255,Math.max(0,Number(u)+Number(i))))|(C=255&Math.min(255,Math.max(0,Number(C)+Number(n))))<<8|(c=255&Math.min(255,Math.max(0,Number(c)+Number(m))))<<16,v[l]=o}}},offsetColorsWithColorAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o&&o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&o.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var r=255&a,i=(65280&a)>>8,n=(16711680&a)>>16,m=o.Frames,t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=0;h<m.length;++h)for(var s=m[h].Colors,E=0;E<t;++E)for(var v=s[E],l=0;l<D;++l){var u=255&(a=v[l]),C=(65280&a)>>8,c=(16711680&a)>>16;a=(u=255&Math.min(255,Math.max(0,Number(u)+Number(r))))|(C=255&Math.min(255,Math.max(0,Number(C)+Number(i))))<<8|(c=255&Math.min(255,Math.max(0,Number(c)+Number(n))))<<16,v[l]=a}},offsetNonZeroColorsWithColorAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o&&o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&o.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var r=255&a,i=(65280&a)>>8,n=(16711680&a)>>16,m=o.Frames,t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=0;h<m.length;++h)for(var s=m[h].Colors,E=0;E<t;++E)for(var v=s[E],l=0;l<D;++l){if(0!=(a=v[l])){var u=255&a,C=(65280&a)>>8,c=(16711680&a)>>16;a=(u=255&Math.min(255,Math.max(0,Number(u)+Number(r))))|(C=255&Math.min(255,Math.max(0,Number(C)+Number(i))))<<8|(c=255&Math.min(255,Math.max(0,Number(c)+Number(n))))<<16,v[l]=a}}},offsetColorsAllFrames:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i){var n=i.Frames;if(i.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var m=ChromaAnimation.getMaxLeds(i.Device),t=0;t<n.length;++t)for(var D=n[t].Colors,h=0;h<m;++h){var s=255&(f=D[h]),E=(65280&f)>>8,v=(16711680&f)>>16;f=(s=255&Math.min(255,Math.max(0,Number(s)+Number(a))))|(E=255&Math.min(255,Math.max(0,Number(E)+Number(o))))<<8|(v=255&Math.min(255,Math.max(0,Number(v)+Number(r))))<<16,D[h]=f}else if(i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var l=ChromaAnimation.getMaxRow(i.Device),u=ChromaAnimation.getMaxColumn(i.Device);for(t=0;t<n.length;++t)for(D=n[t].Colors,h=0;h<l;++h)for(var C=D[h],c=0;c<u;++c){var f;s=255&(f=C[c]),E=(65280&f)>>8,v=(16711680&f)>>16;f=(s=255&Math.min(255,Math.max(0,Number(s)+Number(a))))|(E=255&Math.min(255,Math.max(0,Number(E)+Number(o))))<<8|(v=255&Math.min(255,Math.max(0,Number(v)+Number(r))))<<16,C[c]=f}}}},offsetNonZeroColors:function(e,a,o,r,i){var n=this.LoadedAnimations[e];if(null!=n&&n.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&n.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var m=n.Frames,t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(a>=0&&a<m.length)for(var h=m[a].Colors,s=0;s<t;++s)for(var E=h[s],v=0;v<D;++v){var l=E[v];if(0!=l){var u=255&l,C=(65280&l)>>8,c=(16711680&l)>>16;l=(u=255&Math.min(255,Math.max(0,Number(u)+Number(o))))|(C=255&Math.min(255,Math.max(0,Number(C)+Number(r))))<<8|(c=255&Math.min(255,Math.max(0,Number(c)+Number(i))))<<16,E[v]=l}}}},offsetNonZeroColorsAllFrames:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var n=i.Frames,m=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),t=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),D=0;D<n.length;++D)for(var h=n[D].Colors,s=0;s<m;++s)for(var E=h[s],v=0;v<t;++v){var l=E[v];if(0!=l){var u=255&l,C=(65280&l)>>8,c=(16711680&l)>>16;l=(u=255&Math.min(255,Math.max(0,Number(u)+Number(a))))|(C=255&Math.min(255,Math.max(0,Number(C)+Number(o))))<<8|(c=255&Math.min(255,Math.max(0,Number(c)+Number(r))))<<16,E[v]=l}}},multiplyIntensity:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=r.Frames;if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){var n=ChromaAnimation.getMaxLeds(r.Device);if(a>=0&&a<i.length)for(var m=i[a].Colors,t=0;t<n;++t){var D=255&(C=m[t]),h=(65280&C)>>8,s=(16711680&C)>>16;C=(D=255&Math.min(255,Math.max(0,Number(D)*Number(o))))|(h=255&Math.min(255,Math.max(0,Number(h)*Number(o))))<<8|(s=255&Math.min(255,Math.max(0,Number(s)*Number(o))))<<16,m[t]=C}}else if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var E=ChromaAnimation.getMaxRow(r.Device),v=ChromaAnimation.getMaxColumn(r.Device);if(a>=0&&a<i.length)for(m=i[a].Colors,t=0;t<E;++t)for(var l=m[t],u=0;u<v;++u){var C;D=255&(C=l[u]),h=(65280&C)>>8,s=(16711680&C)>>16;C=(D=255&Math.min(255,Math.max(0,Number(D)*Number(o))))|(h=255&Math.min(255,Math.max(0,Number(h)*Number(o))))<<8|(s=255&Math.min(255,Math.max(0,Number(s)*Number(o))))<<16,l[u]=C}}}},getRGB:(e,a,o)=>255&e|(255&a)<<8|(255&o)<<16,getRed:e=>255&e,getGreen:e=>(65280&e)>>8,getBlue:e=>(16711680&e)>>16,debugColor(e){var a=255&e,o=(65280&e)>>8,r=(16711680&e)>>16;console.log("Red",a,"Green",o,"Blue",r)},multiplyIntensityColor:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=r.Frames;if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){var n=ChromaAnimation.getMaxLeds(r.Device),m=(E=255&o)/255,t=(v=(65280&o)>>8)/255,D=(l=(16711680&o)>>16)/255;if(a>=0&&a<i.length)for(var h=i[a].Colors,s=0;s<n;++s){var E=255&(A=h[s]),v=(65280&A)>>8,l=(16711680&A)>>16;A=(E=255&Math.min(255,Math.max(0,Number(E)*Number(m))))|(v=255&Math.min(255,Math.max(0,Number(v)*Number(t))))<<8|(l=255&Math.min(255,Math.max(0,Number(l)*Number(D))))<<16,h[s]=A}}else if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var u=ChromaAnimation.getMaxRow(r.Device),C=ChromaAnimation.getMaxColumn(r.Device);m=(E=255&o)/255,t=(v=(65280&o)>>8)/255,D=(l=(16711680&o)>>16)/255;if(a>=0&&a<i.length)for(h=i[a].Colors,s=0;s<u;++s)for(var c=h[s],f=0;f<C;++f){var A;E=255&(A=c[f]),v=(65280&A)>>8,l=(16711680&A)>>16;A=(E=255&Math.min(255,Math.max(0,Number(E)*Number(m))))|(v=255&Math.min(255,Math.max(0,Number(v)*Number(t))))<<8|(l=255&Math.min(255,Math.max(0,Number(l)*Number(D))))<<16,c[f]=A}}}},multiplyIntensityColorAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=o.Frames;if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){var i=ChromaAnimation.getMaxLeds(o.Device),n=(s=255&a)/255,m=(E=(65280&a)>>8)/255,t=(v=(16711680&a)>>16)/255;for(frameId=0;frameId<r.length;++frameId)for(var D=r[frameId].Colors,h=0;h<i;++h){var s=255&(f=D[h]),E=(65280&f)>>8,v=(16711680&f)>>16;f=(s=255&Math.min(255,Math.max(0,Number(s)*Number(n))))|(E=255&Math.min(255,Math.max(0,Number(E)*Number(m))))<<8|(v=255&Math.min(255,Math.max(0,Number(v)*Number(t))))<<16,D[h]=f}}else if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var l=ChromaAnimation.getMaxRow(o.Device),u=ChromaAnimation.getMaxColumn(o.Device);n=(s=255&a)/255,m=(E=(65280&a)>>8)/255,t=(v=(16711680&a)>>16)/255;for(frameId=0;frameId<r.length;++frameId)for(D=r[frameId].Colors,h=0;h<l;++h)for(var C=D[h],c=0;c<u;++c){var f;s=255&(f=C[c]),E=(65280&f)>>8,v=(16711680&f)>>16;f=(s=255&Math.min(255,Math.max(0,Number(s)*Number(n))))|(E=255&Math.min(255,Math.max(0,Number(E)*Number(m))))<<8|(v=255&Math.min(255,Math.max(0,Number(v)*Number(t))))<<16,C[c]=f}}}},multiplyIntensityRGB:function(e,a,o,r,i){var n=this.LoadedAnimations[e];if(null!=n){var m=n.Frames;if(n.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D){var t=ChromaAnimation.getMaxLeds(n.Device),D=o/255,h=r/255,s=i/255;if(a>=0&&a<m.length)for(var E=m[a].Colors,v=0;v<t;++v){o=255&(f=E[v]),r=(65280&f)>>8,i=(16711680&f)>>16;f=(o=255&Math.min(255,Math.max(0,Number(o)*Number(D))))|(r=255&Math.min(255,Math.max(0,Number(r)*Number(h))))<<8|(i=255&Math.min(255,Math.max(0,Number(i)*Number(s))))<<16,E[v]=f}}else if(n.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var l=ChromaAnimation.getMaxRow(n.Device),u=ChromaAnimation.getMaxColumn(n.Device);D=o/255,h=r/255,s=i/255;if(a>=0&&a<m.length)for(E=m[a].Colors,v=0;v<l;++v)for(var C=E[v],c=0;c<u;++c){var f;o=255&(f=C[c]),r=(65280&f)>>8,i=(16711680&f)>>16;f=(o=255&Math.min(255,Math.max(0,Number(o)*Number(D))))|(r=255&Math.min(255,Math.max(0,Number(r)*Number(h))))<<8|(i=255&Math.min(255,Math.max(0,Number(i)*Number(s))))<<16,C[c]=f}}}},multiplyIntensityAllFrames:function(e,a){var o=this.LoadedAnimations[e];if(null!=o){var r=o.Frames;if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var i=ChromaAnimation.getMaxLeds(o.Device),n=0;n<r.length;++n)for(var m=r[n].Colors,t=0;t<i;++t){var D=255&(C=m[t]),h=(65280&C)>>8,s=(16711680&C)>>16;C=(D=255&Math.min(255,Math.max(0,Number(D)*Number(a))))|(h=255&Math.min(255,Math.max(0,Number(h)*Number(a))))<<8|(s=255&Math.min(255,Math.max(0,Number(s)*Number(a))))<<16,m[t]=C}else if(o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var E=ChromaAnimation.getMaxRow(o.Device),v=ChromaAnimation.getMaxColumn(o.Device);for(n=0;n<r.length;++n)for(m=r[n].Colors,t=0;t<E;++t)for(var l=m[t],u=0;u<v;++u){var C;D=255&(C=l[u]),h=(65280&C)>>8,s=(16711680&C)>>16;C=(D=255&Math.min(255,Math.max(0,Number(D)*Number(a))))|(h=255&Math.min(255,Math.max(0,Number(h)*Number(a))))<<8|(s=255&Math.min(255,Math.max(0,Number(s)*Number(a))))<<16,l[u]=C}}}},multiplyIntensityAllFramesRGB:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i){var n=i.Frames,m=a/255,t=o/255,D=r/255;if(i.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var h=ChromaAnimation.getMaxLeds(i.Device),s=0;s<n.length;++s)for(var E=n[s].Colors,v=0;v<h;++v){a=255&(f=E[v]),o=(65280&f)>>8,r=(16711680&f)>>16;f=(a=255&Math.min(255,Math.max(0,Number(a)*Number(m))))|(o=255&Math.min(255,Math.max(0,Number(o)*Number(t))))<<8|(r=255&Math.min(255,Math.max(0,Number(r)*Number(D))))<<16,E[v]=f}else if(i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var l=ChromaAnimation.getMaxRow(i.Device),u=ChromaAnimation.getMaxColumn(i.Device);for(s=0;s<n.length;++s)for(E=n[s].Colors,v=0;v<l;++v)for(var C=E[v],c=0;c<u;++c){var f;a=255&(f=C[c]),o=(65280&f)>>8,r=(16711680&f)>>16;f=(a=255&Math.min(255,Math.max(0,Number(a)*Number(m))))|(o=255&Math.min(255,Math.max(0,Number(o)*Number(t))))<<8|(r=255&Math.min(255,Math.max(0,Number(r)*Number(D))))<<16,C[c]=f}}}},multiplyColorLerpAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r)for(var i=r.Frames.length,n=0;n<i;++n){var m=(n+1)/i,t=this.lerpColor(a,o,m);this.multiplyIntensityColor(e,n,t)}},multiplyTargetColorLerpAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=r.Frames;if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var n=ChromaAnimation.getMaxLeds(r.Device),m=0;m<i.length;++m)for(var t=i[m].Colors,D=0;D<n;++D){var h=((255&(u=t[D]))/255+((65280&u)>>8)/255+((16711680&u)>>16)/255)/3;t[D]=ChromaAnimation.lerpColor(a,o,h)}else if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var s=ChromaAnimation.getMaxRow(r.Device),E=ChromaAnimation.getMaxColumn(r.Device);for(m=0;m<i.length;++m)for(t=i[m].Colors,D=0;D<s;++D)for(var v=t[D],l=0;l<E;++l){var u;h=((255&(u=v[l]))/255+((65280&u)>>8)/255+((16711680&u)>>16)/255)/3;v[l]=ChromaAnimation.lerpColor(a,o,h)}}}},multiplyNonZeroTargetColorLerpAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r){var i=r.Frames;if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_1D)for(var n=ChromaAnimation.getMaxLeds(r.Device),m=0;m<i.length;++m)for(var t=i[m].Colors,D=0;D<n;++D){if(0!=(u=t[D])){var h=((255&u)/255+((65280&u)>>8)/255+((16711680&u)>>16)/255)/3;t[D]=ChromaAnimation.lerpColor(a,o,h)}}else if(r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D){var s=ChromaAnimation.getMaxRow(r.Device),E=ChromaAnimation.getMaxColumn(r.Device);for(m=0;m<i.length;++m)for(t=i[m].Colors,D=0;D<s;++D)for(var v=t[D],l=0;l<E;++l){var u;if(0!=(u=v[l])){h=((255&u)/255+((65280&u)>>8)/255+((16711680&u)>>16)/255)/3;v[l]=ChromaAnimation.lerpColor(a,o,h)}}}}},copyRedChannelAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var i=r.Frames,n=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),m=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),t=0;t<i.length;++t)for(var D=i[t].Colors,h=0;h<n;++h)for(var s=D[h],E=0;E<m;++E){var v=s[E],l=255&v;v=l|(255&Math.min(255,Math.max(0,Number(l)*Number(a))))<<8|(255&Math.min(255,Math.max(0,Number(l)*Number(o))))<<16,s[E]=v}},copyGreenChannelAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var i=r.Frames,n=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),m=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),t=0;t<i.length;++t)for(var D=i[t].Colors,h=0;h<n;++h)for(var s=D[h],E=0;E<m;++E){var v=s[E],l=(65280&v)>>8;v=255&Math.min(255,Math.max(0,Number(l)*Number(a)))|l<<8|(255&Math.min(255,Math.max(0,Number(l)*Number(o))))<<16,s[E]=v}},copyBlueChannelAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var i=r.Frames,n=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),m=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),t=0;t<i.length;++t)for(var D=i[t].Colors,h=0;h<n;++h)for(var s=D[h],E=0;E<m;++E){var v=s[E],l=(16711680&v)>>16;v=255&Math.min(255,Math.max(0,Number(l)*Number(a)))|(255&Math.min(255,Math.max(0,Number(l)*Number(o))))<<8|l<<16,s[E]=v}},desaturateAllFrames:function(e){var a=this.LoadedAnimations[e];if(null!=a&&a.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&a.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var o=a.Frames,r=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),i=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),n=0;n<o.length;++n)for(var m=o[n].Colors,t=0;t<r;++t)for(var D=m[t],h=0;h<i;++h){var s=D[h],E=255&s,v=(65280&s)>>8,l=(16711680&s)>>16,u=Math.sqrt(E*E+v*v+l*l);s=u|u<<8|u<<16,D[h]=s}},multiplyIntensityKey:function(e,a,o,r){var i=this.LoadedAnimations[e];if(null!=i&&i.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&i.Device==EChromaSDKDevice2DEnum.DE_Keyboard){var n=i.Frames,m=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),t=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard);if(a>=0&&a<n.length)for(var D=n[a].Colors,h=0;h<m;++h)for(var s=D[h],E=0;E<t;++E)if(getHighByte(o)==h&&getLowByte(o)==E){var v=s[E],l=255&v,u=(65280&v)>>8,C=(16711680&v)>>16;v=(l=255&Math.min(255,Math.max(0,Number(l)*Number(r))))|(u=255&Math.min(255,Math.max(0,Number(u)*Number(r))))<<8|(C=255&Math.min(255,Math.max(0,Number(C)*Number(r))))<<16,s[E]=v}}},multiplyIntensityKeyAllFrames:function(e,a,o){var r=this.LoadedAnimations[e];if(null!=r&&r.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&r.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var i=r.Frames,n=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),m=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),t=0;t<i.length;++t)for(var D=i[t].Colors,h=0;h<n;++h)for(var s=D[h],E=0;E<m;++E)if(getHighByte(a)==h&&getLowByte(a)==E){var v=s[E],l=255&v,u=(65280&v)>>8,C=(16711680&v)>>16;v=(l=255&Math.min(255,Math.max(0,Number(l)*Number(o))))|(u=255&Math.min(255,Math.max(0,Number(u)*Number(o))))<<8|(C=255&Math.min(255,Math.max(0,Number(C)*Number(o))))<<16,s[E]=v}},multiplyIntensityKeyAllFramesRGB:function(e,a,o,r,i){var n=this.LoadedAnimations[e];if(null!=n&&n.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&n.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var m=n.Frames,t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=o/255,s=r/255,E=i/255,v=0;v<m.length;++v)for(var l=m[v].Colors,u=0;u<t;++u)for(var C=l[u],c=0;c<D;++c)if(getHighByte(a)==u&&getLowByte(a)==c){var f=C[c];o=255&f,r=(65280&f)>>8,i=(16711680&f)>>16;f=(o=255&Math.min(255,Math.max(0,Number(o)*Number(h))))|(r=255&Math.min(255,Math.max(0,Number(r)*Number(s))))<<8|(i=255&Math.min(255,Math.max(0,Number(i)*Number(E))))<<16,C[c]=f}},setChromaCustomColorAllFrames:function(e){var a=this.LoadedAnimations[e];if(null!=a&&a.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&a.Device==EChromaSDKDevice2DEnum.DE_Keyboard)for(var o=a.Frames,r=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),i=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),n=0;n<o.length;++n)for(var m=o[n].Colors,t=0;t<r;++t)for(var D=m[t],h=0;h<i;++h){var s=D[h];s=255&s|(65280&s)>>8<<8|(16711680&s)>>16<<16|1<<24,D[h]=s}},setChromaCustomFlag:function(e,a){var o=this.LoadedAnimations[e];null!=o&&o.DeviceType==EChromaSDKDeviceTypeEnum.DE_2D&&o.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&o.setChromaCustomFlag(a)},playComposite:function(e,a,o){null!=chromaSDK?(this.playAnimation(e+"_ChromaLink.chroma",a,o),this.playAnimation(e+"_Headset.chroma",a,o),this.playAnimation(e+"_Keyboard.chroma",a,o),this.playAnimation(e+"_Keypad.chroma",a,o),this.playAnimation(e+"_Mouse.chroma",a,o),this.playAnimation(e+"_Mousepad.chroma",a,o)):setTimeout(function(){ChromaAnimation.playComposite(e,a)},100)},overrideFrameDuration:function(e,a){var o=this.LoadedAnimations[e];if(null!=o)for(var r=o.Frames,i=0;i<r.length;++i){r[i].Duration=a}},stopComposite:function(e){null!=chromaSDK?(this.stopAnimation(e+"_ChromaLink.chroma"),this.stopAnimation(e+"_Headset.chroma"),this.stopAnimation(e+"_Keyboard.chroma"),this.stopAnimation(e+"_Keypad.chroma"),this.stopAnimation(e+"_Mouse.chroma"),this.stopAnimation(e+"_Mousepad.chroma")):setTimeout(function(){ChromaAnimation.stopComposite(e,loop)},100)},staticColor:function(e,a){null!=chromaSDK?(this.stopByAnimationType(e),e==EChromaSDKDeviceEnum.DE_ChromaLink?chromaSDK.createChromaLinkEffect("CHROMA_STATIC",a):e==EChromaSDKDeviceEnum.DE_Headset?chromaSDK.createHeadsetEffect("CHROMA_STATIC",a):e==EChromaSDKDeviceEnum.DE_Keyboard?chromaSDK.createKeyboardEffect("CHROMA_STATIC",a):e==EChromaSDKDeviceEnum.DE_Keypad?chromaSDK.createKeypadEffect("CHROMA_STATIC",a):e==EChromaSDKDeviceEnum.DE_Mouse?chromaSDK.createMouseEffect("CHROMA_STATIC",a):e==EChromaSDKDeviceEnum.DE_Mousepad&&chromaSDK.createMousematEffect("CHROMA_STATIC",a)):setTimeout(function(){ChromaAnimation.staticColor(e,a)},100)},staticColorAll:function(e){this.staticColor(EChromaSDKDeviceEnum.DE_ChromaLink,e),this.staticColor(EChromaSDKDeviceEnum.DE_Headset,e),this.staticColor(EChromaSDKDeviceEnum.DE_Keyboard,e),this.staticColor(EChromaSDKDeviceEnum.DE_Keypad,e),this.staticColor(EChromaSDKDeviceEnum.DE_Mouse,e),this.staticColor(EChromaSDKDeviceEnum.DE_Mousepad,e)},custom:function(e,a){null!=chromaSDK?(this.stopByAnimationType(e),e==EChromaSDKDeviceEnum.DE_ChromaLink?chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM",a):e==EChromaSDKDeviceEnum.DE_Headset?chromaSDK.createHeadsetEffect("CHROMA_CUSTOM",a):e==EChromaSDKDeviceEnum.DE_Keyboard?chromaSDK.createKeyboardEffect("CHROMA_CUSTOM",a):e==EChromaSDKDeviceEnum.DE_Keypad?chromaSDK.createKeypadEffect("CHROMA_CUSTOM",a):e==EChromaSDKDeviceEnum.DE_Mouse?chromaSDK.createMouseEffect("CHROMA_CUSTOM2",a):e==EChromaSDKDeviceEnum.DE_Mousepad&&chromaSDK.createMousematEffect("CHROMA_CUSTOM",a)):setTimeout(function(){ChromaAnimation.custom(e,a)},100)},customKey:function(e){null!=chromaSDK?(this.stopByAnimationType(EChromaSDKDeviceEnum.DE_Keyboard),chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY",e)):setTimeout(function(){ChromaAnimation.customKey(e)},100)},clear:function(e){null!=chromaSDK?(this.stopByAnimationType(e),e==EChromaSDKDeviceEnum.DE_ChromaLink?chromaSDK.createChromaLinkEffect("CHROMA_NONE"):e==EChromaSDKDeviceEnum.DE_Headset?chromaSDK.createHeadsetEffect("CHROMA_NONE"):e==EChromaSDKDeviceEnum.DE_Keyboard?chromaSDK.createKeyboardEffect("CHROMA_NONE"):e==EChromaSDKDeviceEnum.DE_Keypad?chromaSDK.createKeypadEffect("CHROMA_NONE"):e==EChromaSDKDeviceEnum.DE_Mouse?chromaSDK.createMouseEffect("CHROMA_NONE"):e==EChromaSDKDeviceEnum.DE_Mousepad&&chromaSDK.createMousematEffect("CHROMA_NONE")):setTimeout(function(){ChromaAnimation.clear(e)},100)},clearAll:function(){this.clear(EChromaSDKDeviceEnum.DE_ChromaLink),this.clear(EChromaSDKDeviceEnum.DE_Headset),this.clear(EChromaSDKDeviceEnum.DE_Keyboard),this.clear(EChromaSDKDeviceEnum.DE_Keypad),this.clear(EChromaSDKDeviceEnum.DE_Mouse),this.clear(EChromaSDKDeviceEnum.DE_Mousepad)},getKey:function(e,a){return e<<8|a},reactiveKeyEffectAllFrames:function(e,a,o,r){for(var i=ChromaAnimation.getFrameCount(e),n=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),m=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),t=getHighByte(a),D=getLowByte(a),h=0,s=25/i,E=0;E<i;++E){for(var v=h,l=0;l<o;++l){for(var u=0;u<360;++u){var C=u*Math.PI/180,c=Math.floor(t+v*Math.sin(C)),f=Math.floor(D+v*Math.cos(C));if(c>=0&&c<n&&f>=0&&f<m){var A=ChromaAnimation.getKey(c,f);ChromaAnimation.setKeyColor(e,E,A,r)}}v+=s}h+=s}},reactiveKeyEffectAllFramesRGB:function(e,a,o,r,i,n){for(var m=ChromaAnimation.getFrameCount(e),t=ChromaAnimation.getMaxRow(EChromaSDKDevice2DEnum.DE_Keyboard),D=ChromaAnimation.getMaxColumn(EChromaSDKDevice2DEnum.DE_Keyboard),h=getHighByte(a),s=getLowByte(a),E=ChromaAnimation.getRGB(r,i,n),v=0,l=25/m,u=0;u<m;++u){for(var C=v,c=0;c<o;++c){for(var f=0;f<360;++f){var A=f*Math.PI/180,y=Math.floor(h+C*Math.sin(A)),d=Math.floor(s+C*Math.cos(A));if(y>=0&&y<t&&d>=0&&d<D){var K=ChromaAnimation.getKey(y,d);ChromaAnimation.setKeyColor(e,u,K,E)}}C+=l}v+=l}}};function ChromaAnimation1D(){}function ChromaAnimation2D(){}ChromaAnimation.updateFrame(),ChromaAnimation1D.prototype={DeviceType:EChromaSDKDeviceTypeEnum.DE_1D,CurrentIndex:0,IsPlaying:!1,openAnimation:function(e,a){readSize=1;var o=new Uint8Array(e.slice(a,a+readSize))[0];a+=readSize,this.Device=o,readSize=4;var r=new Uint32Array(e.slice(a,a+readSize))[0];a+=readSize;for(var i=ChromaAnimation.getMaxLeds(o),n=[],m=0;m<r;++m){var t=new ChromaAnimationFrame1D;readSize=Float32Array.BYTES_PER_ELEMENT;var D=new Float32Array(e.slice(a,a+readSize))[0];a+=readSize,D<.033&&(D=.033),t.Duration=D,readSize=4*i;var h=new Uint32Array(e.slice(a,a+readSize));a+=readSize,t.Colors=new Array(i);for(var s=0;s<i;++s){var E=h[s];t.Colors[s]=E}n.push(t)}this.Frames=n},saveAnimation:function(){var e=this.Device,a=ChromaAnimation.getMaxLeds(e),o=this.Frames,r=o.length,i=[];(n=new Uint32Array(1))[0]=1,i.push(n.buffer);var n=new Uint8Array(1),m=this.DeviceType;n[0]=m,i.push(n.buffer),(n=new Uint8Array(1))[0]=e,i.push(n.buffer),(n=new Uint32Array(1))[0]=r,i.push(n.buffer);for(var t=0;t<r;++t){var D=o[t],h=(n=new Float32Array(1),D.Duration);h<.033&&(h=.033),n[0]=h,i.push(n.buffer);n=new Uint32Array(a);for(var s=0;s<a;++s){var E=D.Colors[s];n[s]=E}i.push(n.buffer)}return new Blob(i,{type:"application/octet-stream"})},getFrameCount:function(){return this.Frames.length},getFrame:function(){return this.CurrentIndex<this.Frames.length?this.Frames[this.CurrentIndex]:void 0},getDuration:function(){var e=this.getFrame();return null!=e?e.Duration:0},playFrame:function(){if(!(this.FrameTime<Date.now()))if(this.CurrentIndex<this.Frames.length){var e=this.getDuration();this.Device==EChromaSDKDevice1DEnum.DE_ChromaLink?chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM",this.getFrame().Colors):this.Device==EChromaSDKDevice1DEnum.DE_Headset?chromaSDK.createHeadsetEffect("CHROMA_CUSTOM",this.getFrame().Colors):this.Device==EChromaSDKDevice1DEnum.DE_Mousepad&&chromaSDK.createMousematEffect("CHROMA_CUSTOM",this.getFrame().Colors),null!=this.FrameCallback&&this.FrameCallback(this,this.getFrame().Colors);e<.1&&(e=.1),this.FrameTime=Date.now()+Math.floor(1e3*e),++this.CurrentIndex}else this.Loop?this.play(this.Loop):this.stop()},stop:function(){this.IsPlaying=!1,this.CurrentIndex=0,this.Loop=!1,ChromaAnimation.LoadedAnimations1D[this.Device]==this&&(ChromaAnimation.LoadedAnimations1D[this.Device]=void 0),ChromaAnimation.PlayingAnimations1D[this.Device][this.Name]=void 0},isPlaying:function(){return this.IsPlaying},play:function(e){this.stop(),this.IsPlaying=!0,ChromaAnimation.stopByAnimationType(ChromaAnimation.getDeviceEnum(this.DeviceType,this.Device)),ChromaAnimation.LoadedAnimations1D[this.Device]=this,ChromaAnimation.PlayingAnimations1D[this.Device][this.Name]=this,this.CurrentIndex=0,this.Loop=e,this.playFrame()}},ChromaAnimation2D.prototype={DeviceType:EChromaSDKDeviceTypeEnum.DE_2D,CurrentIndex:0,UseChromaCustom:!1,IsPlaying:!1,openAnimation:function(e,a){readSize=1;var o=new Uint8Array(e.slice(a,a+readSize))[0];a+=readSize,this.Device=o,readSize=4;var r=new Uint32Array(e.slice(a,a+readSize))[0];a+=readSize;for(var i=ChromaAnimation.getMaxRow(o),n=ChromaAnimation.getMaxColumn(o),m=[],t=0;t<r;++t){var D=new ChromaAnimationFrame2D;readSize=Float32Array.BYTES_PER_ELEMENT;var h=new Float32Array(e.slice(a,a+readSize))[0];a+=readSize,h<.033&&(h=.033),D.Duration=h,readSize=4*i*n;var s=new Uint32Array(e.slice(a,a+readSize));a+=readSize,D.Colors=new Array(i);for(var E=0;E<i;++E){D.Colors[E]=new Array(n);for(var v=0;v<n;++v){var l=s[E*n+v];D.Colors[E][v]=l}}m.push(D)}this.Frames=m},saveAnimation:function(){var e=this.Device,a=ChromaAnimation.getMaxRow(e),o=ChromaAnimation.getMaxColumn(e),r=this.Frames,i=r.length,n=[];(m=new Uint32Array(1))[0]=1,n.push(m.buffer);var m=new Uint8Array(1),t=this.DeviceType;m[0]=t,n.push(m.buffer),(m=new Uint8Array(1))[0]=e,n.push(m.buffer),(m=new Uint32Array(1))[0]=i,n.push(m.buffer);for(var D=0;D<i;++D){var h=r[D],s=(m=new Float32Array(1),h.Duration);s<.033&&(s=.033),m[0]=s,n.push(m.buffer);m=new Uint32Array(a*o);for(var E=0;E<a;++E)for(var v=0;v<o;++v){var l=h.Colors[E][v];m[E*o+v]=l}n.push(m.buffer)}return new Blob(n,{type:"application/octet-stream"})},getFrameCount:function(){return this.Frames.length},getFrame:function(){return this.CurrentIndex<this.Frames.length?this.Frames[this.CurrentIndex]:void 0},getDuration:function(){var e=this.getFrame();return null!=e?e.Duration:0},setChromaCustomFlag:function(e){this.Device==EChromaSDKDevice2DEnum.DE_Keyboard&&(this.UseChromaCustom=1==e&&e)},playFrame:function(){if(!(this.FrameTime<Date.now()))if(this.CurrentIndex<this.Frames.length){var e=this.getDuration();this.Device==EChromaSDKDevice2DEnum.DE_Keyboard?this.UseChromaCustom?chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY",this.getFrame().Colors):chromaSDK.createKeyboardEffect("CHROMA_CUSTOM",this.getFrame().Colors):this.Device==EChromaSDKDevice2DEnum.DE_Keypad?chromaSDK.createKeypadEffect("CHROMA_CUSTOM",this.getFrame().Colors):this.Device==EChromaSDKDevice2DEnum.DE_Mouse&&chromaSDK.createMouseEffect("CHROMA_CUSTOM2",this.getFrame().Colors),null!=this.FrameCallback&&this.FrameCallback(this,this.getFrame().Colors);e<.1&&(e=.1),this.FrameTime=Date.now()+Math.floor(1e3*e),++this.CurrentIndex}else this.Loop?this.play(this.Loop):this.stop()},stop:function(){this.IsPlaying=!1,this.CurrentIndex=0,this.Loop=!1,ChromaAnimation.LoadedAnimations2D[this.Device]==this&&(ChromaAnimation.LoadedAnimations2D[this.Device]=void 0),ChromaAnimation.PlayingAnimations2D[this.Device][this.Name]=void 0},isPlaying:function(){return this.IsPlaying},play:function(e){this.stop(),this.IsPlaying=!0,ChromaAnimation.stopByAnimationType(ChromaAnimation.getDeviceEnum(this.DeviceType,this.Device)),ChromaAnimation.LoadedAnimations2D[this.Device]=this,ChromaAnimation.PlayingAnimations2D[this.Device][this.Name]=this,this.CurrentIndex=0,this.Loop=e,this.playFrame()}};

var chromaSDK = new ChromaSDK();
var chromaIsInitialized = false;
var browserTabIsVisible = true;
var pageHadFocus = undefined;


function detectChromaSDK() {
  var oReq = new XMLHttpRequest();
  oReq.timeout = 2000; // time in milliseconds
  oReq.addEventListener("load", function() {
    var jsonVersion = JSON.parse(this.responseText);
    var versionOrBetter = false;
    if (jsonVersion != undefined &&
      jsonVersion.version != undefined) {
      var parts = jsonVersion.version.split(".");
      if (parts.length >= 3 &&
        ((parts[0] > 2) ||
        (parts[0] == 2 && parts[1] > 8) ||
        (parts[0] == 2 && parts[1] == 8 && parts[2] >= 5))) {
          versionOrBetter = true;
        } else {
          //$("#divChromaMissing").show();
          setTimeout(function() { detectChromaSDK(); }, 1000);
        }
    }
    
    if (versionOrBetter) {
      chromaSDK.init();
      chromaIsInitialized = true;
      
      //showChromaReady();
      
      console.log('Chroma initialized!');

    } else {
     
      showChromaProblem();

      //Redetect Chroma
      setTimeout(function() { detectChromaSDK(); }, 5000);
    }
  });
  oReq.ontimeout = function() {
    showChromaProblem();
    setTimeout(function() { detectChromaSDK(); }, 5000);
  };
  oReq.onerror = function() {
    showChromaProblem();
    setTimeout(function() { detectChromaSDK(); }, 5000);
  };
  oReq.open("GET", "https://chromasdk.io:54236/razer/chromasdk");
  oReq.send();
}


// browser function to determine tab is hidden
// ref: https://stackoverflow.com/questions/7389328/detect-if-browser-tab-has-focus/46719827#46719827
function handleTabVisibility() {

  // check the visiblility of the page
  var hidden, visibilityState, visibilityChange;

  if (typeof document.hidden !== "undefined") {
      hidden = "hidden", visibilityChange = "visibilitychange", visibilityState = "visibilityState";
  }
  else if (typeof document.mozHidden !== "undefined") {
      hidden = "mozHidden", visibilityChange = "mozvisibilitychange", visibilityState = "mozVisibilityState";
  }
  else if (typeof document.msHidden !== "undefined") {
      hidden = "msHidden", visibilityChange = "msvisibilitychange", visibilityState = "msVisibilityState";
  }
  else if (typeof document.webkitHidden !== "undefined") {
      hidden = "webkitHidden", visibilityChange = "webkitvisibilitychange", visibilityState = "webkitVisibilityState";
  }

  if (typeof document.addEventListener === "undefined" || typeof hidden === "undefined") {
      // not supported
  }
  else {
      document.addEventListener(visibilityChange, function() {
          //console.log('hidden', document[hidden]);
          //console.log('visibilityState: ', document[visibilityState]);

          switch (document[visibilityState]) {
          case "visible":
              // visible
              browserTabIsVisible = true;
              break;
          case "hidden":
              // hidden
              browserTabIsVisible = false;
              break;
          }
      }, false);
  }

};
// end of browser function


function detectWindowFocus() {
  if (browserTabIsVisible) {
    if (!pageHadFocus) {
      pageHadFocus = true;
      //console.log('page has focus');
      detectChromaSDK();
    }
  } else {
    if (pageHadFocus && chromaIsInitialized) {
      ChromaAnimation.clearAll();
      chromaSDK.uninit();
      console.log('Chroma has uninitialized! (Page lost focus)');
      pageHadFocus = false;
      chromaIsInitialized = false;
      //console.log('page lost focus');
    }
  }
}


handleTabVisibility();
setInterval(function() {
  detectWindowFocus();
}, 1000);
 